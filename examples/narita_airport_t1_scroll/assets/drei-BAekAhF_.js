import{a as Rn,R as Yt,r as j,g as Nn}from"./react-4ldeB94U.js";import{c as z,C as on,V as C,Q as it,j as rn,k as kt,E as Yn,l as Kt,m as Un,n as zn,o as Q,p as J,q as Kn,P as Tt,O as Ot}from"./three-DvX3l9np.js";import{u as ot,a as sn}from"./fiber-eRm0wncS.js";import"./spring-C8T-Vk3k.js";var Fn,ce=Rn;Fn=ce.createRoot,ce.hydrateRoot;function Ft(){return Ft=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var e in o)({}).hasOwnProperty.call(o,e)&&(n[e]=o[e])}return n},Ft.apply(null,arguments)}function Hn(n,t,o){return Math.max(t,Math.min(n,o))}const x={toVector(n,t){return n===void 0&&(n=t),Array.isArray(n)?n:[n,n]},add(n,t){return[n[0]+t[0],n[1]+t[1]]},sub(n,t){return[n[0]-t[0],n[1]-t[1]]},addTo(n,t){n[0]+=t[0],n[1]+=t[1]},subTo(n,t){n[0]-=t[0],n[1]-=t[1]}};function le(n,t,o){return t===0||Math.abs(t)===1/0?Math.pow(n,o*5):n*t*o/(t+o*n)}function ue(n,t,o,e=.15){return e===0?Hn(n,t,o):n<t?-le(t-n,o-t,e)+t:n>o?+le(n-o,o-t,e)+o:n}function Vn(n,[t,o],[e,r]){const[[a,c],[s,u]]=n;return[ue(t,a,c,e),ue(o,s,u,r)]}function Wn(n,t){if(typeof n!="object"||n===null)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var e=o.call(n,t||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function qn(n){var t=Wn(n,"string");return typeof t=="symbol"?t:String(t)}function K(n,t,o){return t=qn(t),t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}function fe(n,t){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),o.push.apply(o,e)}return o}function O(n){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?fe(Object(o),!0).forEach(function(e){K(n,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):fe(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}const an={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function he(n){return n?n[0].toUpperCase()+n.slice(1):""}const Bn=["enter","leave"];function Xn(n=!1,t){return n&&!Bn.includes(t)}function Zn(n,t="",o=!1){const e=an[n],r=e&&e[t]||t;return"on"+he(n)+he(r)+(Xn(o,r)?"Capture":"")}const Gn=["gotpointercapture","lostpointercapture"];function $n(n){let t=n.substring(2).toLowerCase();const o=!!~t.indexOf("passive");o&&(t=t.replace("passive",""));const e=Gn.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(e);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:o}}function Qn(n,t=""){const o=an[n],e=o&&o[t]||t;return n+e}function Ct(n){return"touches"in n}function cn(n){return Ct(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Jn(n){return Array.from(n.touches).filter(t=>{var o,e;return t.target===n.currentTarget||((o=n.currentTarget)===null||o===void 0||(e=o.contains)===null||e===void 0?void 0:e.call(o,t.target))})}function to(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function ln(n){return Ct(n)?to(n)[0]:n}function eo(n){return Jn(n).map(t=>t.identifier)}function Ut(n){const t=ln(n);return Ct(n)?t.identifier:t.pointerId}function pe(n){const t=ln(n);return[t.clientX,t.clientY]}function no(n){const t={};if("buttons"in n&&(t.buttons=n.buttons),"shiftKey"in n){const{shiftKey:o,altKey:e,metaKey:r,ctrlKey:a}=n;Object.assign(t,{shiftKey:o,altKey:e,metaKey:r,ctrlKey:a})}return t}function Dt(n,...t){return typeof n=="function"?n(...t):n}function oo(){}function io(...n){return n.length===0?oo:n.length===1?n[0]:function(){let t;for(const o of n)t=o.apply(this,arguments)||t;return t}}function de(n,t){return Object.assign({},t,n||{})}const ro=32;class so{constructor(t,o,e){this.ctrl=t,this.args=o,this.key=e,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:o,ingKey:e,args:r}=this;o[e]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=r,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const o=this.state,e=this.config;o._active||(this.reset(),this.computeInitial(),o._active=!0,o.target=t.target,o.currentTarget=t.currentTarget,o.lastOffset=e.from?Dt(e.from,o):o.offset,o.offset=o.lastOffset,o.startTime=o.timeStamp=t.timeStamp)}computeValues(t){const o=this.state;o._values=t,o.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:o,config:e,shared:r}=this;o.args=this.args;let a=0;if(t&&(o.event=t,e.preventDefault&&t.cancelable&&o.event.preventDefault(),o.type=t.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,no(t)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=t.timeStamp-o.timeStamp,o.timeStamp=t.timeStamp,o.elapsedTime=o.timeStamp-o.startTime),o._active){const w=o._delta.map(Math.abs);x.addTo(o._distance,w)}this.axisIntent&&this.axisIntent(t);const[c,s]=o._movement,[u,b]=e.threshold,{_step:f,values:y}=o;if(e.hasCustomTransform?(f[0]===!1&&(f[0]=Math.abs(c)>=u&&y[0]),f[1]===!1&&(f[1]=Math.abs(s)>=b&&y[1])):(f[0]===!1&&(f[0]=Math.abs(c)>=u&&Math.sign(c)*u),f[1]===!1&&(f[1]=Math.abs(s)>=b&&Math.sign(s)*b)),o.intentional=f[0]!==!1||f[1]!==!1,!o.intentional)return;const v=[0,0];if(e.hasCustomTransform){const[w,tt]=y;v[0]=f[0]!==!1?w-f[0]:0,v[1]=f[1]!==!1?tt-f[1]:0}else v[0]=f[0]!==!1?c-f[0]:0,v[1]=f[1]!==!1?s-f[1]:0;this.restrictToAxis&&!o._blocked&&this.restrictToAxis(v);const T=o.offset,A=o._active&&!o._blocked||o.active;A&&(o.first=o._active&&!o.active,o.last=!o._active&&o.active,o.active=r[this.ingKey]=o._active,t&&(o.first&&("bounds"in e&&(o._bounds=Dt(e.bounds,o)),this.setup&&this.setup()),o.movement=v,this.computeOffset()));const[E,M]=o.offset,[[h,g],[S,R]]=o._bounds;o.overflow=[E<h?-1:E>g?1:0,M<S?-1:M>R?1:0],o._movementBound[0]=o.overflow[0]?o._movementBound[0]===!1?o._movement[0]:o._movementBound[0]:!1,o._movementBound[1]=o.overflow[1]?o._movementBound[1]===!1?o._movement[1]:o._movementBound[1]:!1;const N=o._active?e.rubberband||[0,0]:[0,0];if(o.offset=Vn(o._bounds,o.offset,N),o.delta=x.sub(o.offset,T),this.computeMovement(),A&&(!o.last||a>ro)){o.delta=x.sub(o.offset,T);const w=o.delta.map(Math.abs);x.addTo(o.distance,w),o.direction=o.delta.map(Math.sign),o._direction=o._delta.map(Math.sign),!o.first&&a>0&&(o.velocity=[w[0]/a,w[1]/a],o.timeDelta=a)}}emit(){const t=this.state,o=this.shared,e=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!e.triggerAllEvents)return;const r=this.handler(O(O(O({},o),t),{},{[this.aliasKey]:t.values}));r!==void 0&&(t.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function ao([n,t],o){const e=Math.abs(n),r=Math.abs(t);if(e>r&&e>o)return"x";if(r>e&&r>o)return"y"}class co extends so{constructor(...t){super(...t),K(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=x.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=x.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const o=this.state,e=this.config;if(!o.axis&&t){const r=typeof e.axisThreshold=="object"?e.axisThreshold[cn(t)]:e.axisThreshold;o.axis=ao(o._movement,r)}o._blocked=(e.lockDirection||!!e.axis)&&!o.axis||!!e.axis&&e.axis!==o.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const lo=n=>n,me=.15,un={enabled(n=!0){return n},eventOptions(n,t,o){return O(O({},o.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[me,me];case!1:return[0,0];default:return x.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return x.toVector(n)},transform(n,t,o){const e=n||o.shared.transform;return this.hasCustomTransform=!!e,e||lo},threshold(n){return x.toVector(n,0)}},uo=0,wt=O(O({},un),{},{axis(n,t,{axis:o}){if(this.lockDirection=o==="lock",!this.lockDirection)return o},axisThreshold(n=uo){return n},bounds(n={}){if(typeof n=="function")return a=>wt.bounds(n(a));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:t=-1/0,right:o=1/0,top:e=-1/0,bottom:r=1/0}=n;return[[t,o],[e,r]]}}),ye={ArrowRight:(n,t=1)=>[n*t,0],ArrowLeft:(n,t=1)=>[-1*n*t,0],ArrowUp:(n,t=1)=>[0,-1*n*t],ArrowDown:(n,t=1)=>[0,n*t]};class fo extends co{constructor(...t){super(...t),K(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const o=t._bounds.getBoundingClientRect(),e=t.currentTarget.getBoundingClientRect(),r={left:o.left-e.left+t.offset[0],right:o.right-e.right+t.offset[0],top:o.top-e.top+t.offset[1],bottom:o.bottom-e.bottom+t.offset[1]};t._bounds=wt.bounds(r)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const o=this.config,e=this.state;if(t.buttons!=null&&(Array.isArray(o.pointerButtons)?!o.pointerButtons.includes(t.buttons):o.pointerButtons!==-1&&o.pointerButtons!==t.buttons))return;const r=this.ctrl.setEventIds(t);o.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(r&&r.size>1&&e._pointerActive)&&(this.start(t),this.setupPointer(t),e._pointerId=Ut(t),e._pointerActive=!0,this.computeValues(pe(t)),this.computeInitial(),o.preventScrollAxis&&cn(t)!=="mouse"?(e._active=!1,this.setupScrollPrevention(t)):o.delay>0?(this.setupDelayTrigger(t),o.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const o=this.state;o._active=!0,o._preventScroll=!0,o._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const o=this.state,e=this.config;if(!o._pointerActive)return;const r=Ut(t);if(o._pointerId!==void 0&&r!==o._pointerId)return;const a=pe(t);if(document.pointerLockElement===t.target?o._delta=[t.movementX,t.movementY]:(o._delta=x.sub(a,o._values),this.computeValues(a)),x.addTo(o._movement,o._delta),this.compute(t),o._delayed&&o.intentional){this.timeoutStore.remove("dragDelay"),o.active=!1,this.startPointerDrag(t);return}if(e.preventScrollAxis&&!o._preventScroll)if(o.axis)if(o.axis===e.preventScrollAxis||e.preventScrollAxis==="xy"){o._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const o=this.state,e=this.config;if(!o._active||!o._pointerActive)return;const r=Ut(t);if(o._pointerId!==void 0&&r!==o._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[a,c]=o._distance;if(o.tap=a<=e.tapsThreshold&&c<=e.tapsThreshold,o.tap&&e.filterTaps)o._force=!0;else{const[s,u]=o._delta,[b,f]=o._movement,[y,v]=e.swipe.velocity,[T,A]=e.swipe.distance,E=e.swipe.duration;if(o.elapsedTime<E){const M=Math.abs(s/o.timeDelta),h=Math.abs(u/o.timeDelta);M>y&&Math.abs(b)>T&&(o.swipe[0]=Math.sign(s)),h>v&&Math.abs(f)>A&&(o.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const o=this.config,e=o.device;o.pointerLock&&t.currentTarget.requestPointerLock(),o.pointerCapture||(this.eventStore.add(this.sharedConfig.window,e,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,e,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,e,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,ho(t);const o=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",o),this.eventStore.add(this.sharedConfig.window,"touch","cancel",o),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const o=ye[t.key];if(o){const e=this.state,r=t.shiftKey?10:t.altKey?.1:1;this.start(t),e._delta=o(this.config.keyboardDisplacement,r),e._keyboardActive=!0,x.addTo(e._movement,e._delta),this.compute(t),this.emit()}}keyUp(t){t.key in ye&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const o=this.config.device;t(o,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(o,"change",this.pointerMove.bind(this)),t(o,"end",this.pointerUp.bind(this)),t(o,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function ho(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Et=typeof window<"u"&&window.document&&window.document.createElement;function fn(){return Et&&"ontouchstart"in window}function po(){return fn()||Et&&window.navigator.maxTouchPoints>1}function mo(){return Et&&"onpointerdown"in window}function yo(){return Et&&"exitPointerLock"in window.document}function bo(){try{return"constructor"in GestureEvent}catch{return!1}}const H={isBrowser:Et,gesture:bo(),touch:fn(),touchscreen:po(),pointer:mo(),pointerLock:yo()},vo=250,go=180,_o=.5,wo=50,Eo=250,Po=10,be={mouse:0,touch:0,pen:8},To=O(O({},wt),{},{device(n,t,{pointer:{touch:o=!1,lock:e=!1,mouse:r=!1}={}}){return this.pointerLock=e&&H.pointerLock,H.touch&&o?"touch":this.pointerLock?"mouse":H.pointer&&!r?"pointer":H.touch?"touch":"mouse"},preventScrollAxis(n,t,{preventScroll:o}){if(this.preventScrollDelay=typeof o=="number"?o:o||o===void 0&&n?vo:void 0,!(!H.touchscreen||o===!1))return n||(o!==void 0?"y":void 0)},pointerCapture(n,t,{pointer:{capture:o=!0,buttons:e=1,keys:r=!0}={}}){return this.pointerButtons=e,this.keys=r,!this.pointerLock&&this.device==="pointer"&&o},threshold(n,t,{filterTaps:o=!1,tapsThreshold:e=3,axis:r=void 0}){const a=x.toVector(n,o?e:r?1:0);return this.filterTaps=o,this.tapsThreshold=e,a},swipe({velocity:n=_o,distance:t=wo,duration:o=Eo}={}){return{velocity:this.transform(x.toVector(n)),distance:this.transform(x.toVector(t)),duration:o}},delay(n=0){switch(n){case!0:return go;case!1:return 0;default:return n}},axisThreshold(n){return n?O(O({},be),n):be},keyboardDisplacement(n=Po){return n}});O(O({},un),{},{device(n,t,{shared:o,pointer:{touch:e=!1}={}}){if(o.target&&!H.touch&&H.gesture)return"gesture";if(H.touch&&e)return"touch";if(H.touchscreen){if(H.pointer)return"pointer";if(H.touch)return"touch"}},bounds(n,t,{scaleBounds:o={},angleBounds:e={}}){const r=c=>{const s=de(Dt(o,c),{min:-1/0,max:1/0});return[s.min,s.max]},a=c=>{const s=de(Dt(e,c),{min:-1/0,max:1/0});return[s.min,s.max]};return typeof o!="function"&&typeof e!="function"?[r(),a()]:c=>[r(c),a(c)]},threshold(n,t,o){return this.lockDirection=o.axis==="lock",x.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});O(O({},wt),{},{mouseOnly:(n=!0)=>n});O(O({},wt),{},{mouseOnly:(n=!0)=>n});const hn=new Map,Ht=new Map;function Oo(n){hn.set(n.key,n.engine),Ht.set(n.key,n.resolver)}const Ao={key:"drag",engine:fo,resolver:To};function Mo(n,t){if(n==null)return{};var o={},e=Object.keys(n),r,a;for(a=0;a<e.length;a++)r=e[a],!(t.indexOf(r)>=0)&&(o[r]=n[r]);return o}function So(n,t){if(n==null)return{};var o=Mo(n,t),e,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)e=a[r],!(t.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(n,e)&&(o[e]=n[e])}return o}const Do={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=H.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform(n){return n}},Io=["target","eventOptions","window","enabled","transform"];function St(n={},t){const o={};for(const[e,r]of Object.entries(t))switch(typeof r){case"function":o[e]=r.call(o,n[e],e,n);break;case"object":o[e]=St(n[e],r);break;case"boolean":r&&(o[e]=n[e]);break}return o}function ko(n,t,o={}){const e=n,{target:r,eventOptions:a,window:c,enabled:s,transform:u}=e,b=So(e,Io);if(o.shared=St({target:r,eventOptions:a,window:c,enabled:s,transform:u},Do),t){const f=Ht.get(t);o[t]=St(O({shared:o.shared},b),f)}else for(const f in b){const y=Ht.get(f);y&&(o[f]=St(O({shared:o.shared},b[f]),y))}return o}class pn{constructor(t,o){K(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=o}add(t,o,e,r,a){const c=this._listeners,s=Qn(o,e),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},b=O(O({},u),a);t.addEventListener(s,r,b);const f=()=>{t.removeEventListener(s,r,b),c.delete(f)};return c.add(f),f}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class Co{constructor(){K(this,"_timeouts",new Map)}add(t,o,e=140,...r){this.remove(t),this._timeouts.set(t,window.setTimeout(o,e,...r))}remove(t){const o=this._timeouts.get(t);o&&window.clearTimeout(o)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class Lo{constructor(t){K(this,"gestures",new Set),K(this,"_targetEventStore",new pn(this)),K(this,"gestureEventStores",{}),K(this,"gestureTimeoutStores",{}),K(this,"handlers",{}),K(this,"config",{}),K(this,"pointerIds",new Set),K(this,"touchIds",new Set),K(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),xo(this,t)}setEventIds(t){if(Ct(t))return this.touchIds=new Set(eo(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,o){this.handlers=t,this.nativeHandlers=o}applyConfig(t,o){this.config=ko(t,o,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const o=this.config.shared,e={};let r;if(!(o.target&&(r=o.target(),!r))){if(o.enabled){for(const c of this.gestures){const s=this.config[c],u=ve(e,s.eventOptions,!!r);if(s.enabled){const b=hn.get(c);new b(this,t,c).bind(u)}}const a=ve(e,o.eventOptions,!!r);for(const c in this.nativeHandlers)a(c,"",s=>this.nativeHandlers[c](O(O({},this.state.shared),{},{event:s,args:t})),void 0,!0)}for(const a in e)e[a]=io(...e[a]);if(!r)return e;for(const a in e){const{device:c,capture:s,passive:u}=$n(a);this._targetEventStore.add(r,c,"",e[a],{capture:s,passive:u})}}}}function st(n,t){n.gestures.add(t),n.gestureEventStores[t]=new pn(n,t),n.gestureTimeoutStores[t]=new Co}function xo(n,t){t.drag&&st(n,"drag"),t.wheel&&st(n,"wheel"),t.scroll&&st(n,"scroll"),t.move&&st(n,"move"),t.pinch&&st(n,"pinch"),t.hover&&st(n,"hover")}const ve=(n,t,o)=>(e,r,a,c={},s=!1)=>{var u,b;const f=(u=c.capture)!==null&&u!==void 0?u:t.capture,y=(b=c.passive)!==null&&b!==void 0?b:t.passive;let v=s?e:Zn(e,r,f);o&&y&&(v+="Passive"),n[v]=n[v]||[],n[v].push(a)};function jo(n,t={},o,e){const r=Yt.useMemo(()=>new Lo(n),[]);if(r.applyHandlers(n,e),r.applyConfig(t,o),Yt.useEffect(r.effect.bind(r)),Yt.useEffect(()=>r.clean.bind(r),[]),t.target===void 0)return r.bind.bind(r)}function Ai(n,t){return Oo(Ao),jo({drag:n},t||{},"drag")}function _t(n,t,o){return t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}function Vt(n,t){(t==null||t>n.length)&&(t=n.length);for(var o=0,e=new Array(t);o<t;o++)e[o]=n[o];return e}function Ro(n,t){if(n){if(typeof n=="string")return Vt(n,t);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Vt(n,t)}}function No(n){if(Array.isArray(n))return Vt(n)}function Yo(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Uo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zo(n){return No(n)||Yo(n)||Ro(n)||Uo()}new z;new z;function Ko(n,t,o){return Math.max(t,Math.min(o,n))}function Fo(n,t){return Ko(n-Math.floor(n/t)*t,0,t)}function Ho(n,t){var o=Fo(t-n,Math.PI*2);return o>Math.PI&&(o-=Math.PI*2),o}function dn(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var F=function n(t,o,e){var r=this;dn(this,n),_t(this,"dot2",function(a,c){return r.x*a+r.y*c}),_t(this,"dot3",function(a,c,s){return r.x*a+r.y*c+r.z*s}),this.x=t,this.y=o,this.z=e},Vo=[new F(1,1,0),new F(-1,1,0),new F(1,-1,0),new F(-1,-1,0),new F(1,0,1),new F(-1,0,1),new F(1,0,-1),new F(-1,0,-1),new F(0,1,1),new F(0,-1,1),new F(0,1,-1),new F(0,-1,-1)],ge=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],_e=new Array(512),we=new Array(512),Wo=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var o=0;o<256;o++){var e;o&1?e=ge[o]^t&255:e=ge[o]^t>>8&255,_e[o]=_e[o+256]=e,we[o]=we[o+256]=Vo[e%12]}};Wo(0);function qo(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var t=n;n=0;for(var o=0;o<t.length;o++)n=(n+(o+1)*(t.charCodeAt(o)%96))%2147483647}return n===0&&(n=311),n}function Ee(n){var t=qo(n);return function(){var o=t*48271%2147483647;return t=o,o/2147483647}}var Bo=function n(t){var o=this;dn(this,n),_t(this,"seed",0),_t(this,"init",function(e){o.seed=e,o.value=Ee(e)}),_t(this,"value",Ee(this.seed)),this.init(t)};new Bo(Math.random());var Xo=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return e/Math.atan(1/o)*Math.atan(Math.sin(2*Math.PI*t*r)/o)},mn=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)},Zo=function(t){return t},Go={in:function(t){return 1-Math.cos(t*Math.PI/2)},out:function(t){return Math.sin(t*Math.PI/2)},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},$o={in:function(t){return t*t*t},out:function(t){return 1-Math.pow(1-t,3)},inOut:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}},Qo={in:function(t){return t*t*t*t*t},out:function(t){return 1-Math.pow(1-t,5)},inOut:function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}},Jo={in:function(t){return 1-Math.sqrt(1-Math.pow(t,2))},out:function(t){return Math.sqrt(1-Math.pow(t-1,2))},inOut:function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}},ti={in:function(t){return t*t*t*t},out:function(t){return 1- --t*t*t*t},inOut:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}},ei={in:function(t){return t===0?0:Math.pow(2,10*t-10)},out:function(t){return t===1?1:1-Math.pow(2,-10*t)},inOut:function(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}};function D(n,t,o){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:mn,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,u="velocity_"+t;if(n.__damp===void 0&&(n.__damp={}),n.__damp[u]===void 0&&(n.__damp[u]=0),Math.abs(n[t]-o)<=s)return n[t]=o,!1;e=Math.max(1e-4,e);var b=2/e,f=c(b*r),y=n[t]-o,v=o,T=a*e;y=Math.min(Math.max(y,-T),T),o=n[t]-y;var A=(n.__damp[u]+b*y)*r;n.__damp[u]=(n.__damp[u]-b*A)*f;var E=o+(y+A)*f;return v-n[t]>0==E>v&&(E=v,n.__damp[u]=(E-v)/r),n[t]=E,!0}var ni=function(t){return t&&t.isCamera},oi=function(t){return t&&t.isLight},dt=new C,Pe=new it,Te=new it,mt=new rn,zt=new C;function ii(n,t,o,e,r,a,c){typeof t=="number"?dt.setScalar(t):Array.isArray(t)?dt.set(t[0],t[1],t[2]):dt.copy(t);var s=n.parent;n.updateWorldMatrix(!0,!1),zt.setFromMatrixPosition(n.matrixWorld),ni(n)||oi(n)?mt.lookAt(zt,dt,n.up):mt.lookAt(dt,zt,n.up),It(n.quaternion,Te.setFromRotationMatrix(mt),o,e,r,a,c),s&&(mt.extractRotation(s.matrixWorld),Pe.setFromRotationMatrix(mt),It(n.quaternion,Te.copy(n.quaternion).premultiply(Pe.invert()),o,e,r,a,c))}function lt(n,t,o,e,r,a,c,s){return D(n,t,n[t]+Ho(n[t],o),e,r,a,c,s)}var yt=new z,Oe,Ae;function ri(n,t,o,e,r,a,c){return typeof t=="number"?yt.setScalar(t):Array.isArray(t)?yt.set(t[0],t[1]):yt.copy(t),Oe=D(n,"x",yt.x,o,e,r,a,c),Ae=D(n,"y",yt.y,o,e,r,a,c),Oe||Ae}var at=new C,Me,Se,De;function Wt(n,t,o,e,r,a,c){return typeof t=="number"?at.setScalar(t):Array.isArray(t)?at.set(t[0],t[1],t[2]):at.copy(t),Me=D(n,"x",at.x,o,e,r,a,c),Se=D(n,"y",at.y,o,e,r,a,c),De=D(n,"z",at.z,o,e,r,a,c),Me||Se||De}var nt=new kt,Ie,ke,Ce,Le;function si(n,t,o,e,r,a,c){return typeof t=="number"?nt.setScalar(t):Array.isArray(t)?nt.set(t[0],t[1],t[2],t[3]):nt.copy(t),Ie=D(n,"x",nt.x,o,e,r,a,c),ke=D(n,"y",nt.y,o,e,r,a,c),Ce=D(n,"z",nt.z,o,e,r,a,c),Le=D(n,"w",nt.w,o,e,r,a,c),Ie||ke||Ce||Le}var bt=new Yn,xe,je,Re;function ai(n,t,o,e,r,a,c){return Array.isArray(t)?bt.set(t[0],t[1],t[2],t[3]):bt.copy(t),xe=lt(n,"x",bt.x,o,e,r,a,c),je=lt(n,"y",bt.y,o,e,r,a,c),Re=lt(n,"z",bt.z,o,e,r,a,c),xe||je||Re}var ct=new on,Ne,Ye,Ue;function ci(n,t,o,e,r,a,c){return t instanceof on?ct.copy(t):Array.isArray(t)?ct.setRGB(t[0],t[1],t[2]):ct.set(t),Ne=D(n,"r",ct.r,o,e,r,a,c),Ye=D(n,"g",ct.g,o,e,r,a,c),Ue=D(n,"b",ct.b,o,e,r,a,c),Ne||Ye||Ue}var V=new it,X=new kt,ze=new kt,vt=new kt,Ke,Fe,He,Ve;function It(n,t,o,e,r,a,c){var s=n;Array.isArray(t)?V.set(t[0],t[1],t[2],t[3]):V.copy(t);var u=n.dot(V)>0?1:-1;return V.x*=u,V.y*=u,V.z*=u,V.w*=u,Ke=D(n,"x",V.x,o,e,r,a,c),Fe=D(n,"y",V.y,o,e,r,a,c),He=D(n,"z",V.z,o,e,r,a,c),Ve=D(n,"w",V.w,o,e,r,a,c),X.set(n.x,n.y,n.z,n.w).normalize(),ze.set(s.__damp.velocity_x,s.__damp.velocity_y,s.__damp.velocity_z,s.__damp.velocity_w),vt.copy(X).multiplyScalar(ze.dot(X)/X.dot(X)),s.__damp.velocity_x-=vt.x,s.__damp.velocity_y-=vt.y,s.__damp.velocity_z-=vt.z,s.__damp.velocity_w-=vt.w,n.set(X.x,X.y,X.z,X.w),Ke||Fe||He||Ve}var gt=new Kt,We,qe,Be;function li(n,t,o,e,r,a,c){return Array.isArray(t)?gt.set(t[0],t[1],t[2]):gt.copy(t),We=D(n,"radius",gt.radius,o,e,r,a,c),qe=lt(n,"phi",gt.phi,o,e,r,a,c),Be=lt(n,"theta",gt.theta,o,e,r,a,c),We||qe||Be}var At=new rn,Xe=new C,Ze=new it,Ge=new C,$e,Qe,Je;function ui(n,t,o,e,r,a,c){var s=n;return s.__damp===void 0&&(s.__damp={position:new C,rotation:new it,scale:new C},n.decompose(s.__damp.position,s.__damp.rotation,s.__damp.scale)),Array.isArray(t)?At.set.apply(At,zo(t)):At.copy(t),At.decompose(Xe,Ze,Ge),$e=Wt(s.__damp.position,Xe,o,e,r,a,c),Qe=It(s.__damp.rotation,Ze,o,e,r,a,c),Je=Wt(s.__damp.scale,Ge,o,e,r,a,c),n.compose(s.__damp.position,s.__damp.rotation,s.__damp.scale),$e||Qe||Je}var tn=Object.freeze({__proto__:null,rsqw:Xo,exp:mn,linear:Zo,sine:Go,cubic:$o,quint:Qo,circ:Jo,quart:ti,expo:ei,damp:D,dampLookAt:ii,dampAngle:lt,damp2:ri,damp3:Wt,damp4:si,dampE:ai,dampC:ci,dampQ:It,dampS:li,dampM:ui});const yn=j.createContext(null);function Mi(){return j.useContext(yn)}function Si({eps:n=1e-5,enabled:t=!0,infinite:o,horizontal:e,pages:r=1,distance:a=1,damping:c=.25,maxSpeed:s=1/0,prepend:u=!1,style:b={},children:f}){const{get:y,setEvents:v,gl:T,size:A,invalidate:E,events:M}=ot(),[h]=j.useState(()=>document.createElement("div")),[g]=j.useState(()=>document.createElement("div")),[S]=j.useState(()=>document.createElement("div")),R=T.domElement.parentNode,N=j.useRef(0),w=j.useMemo(()=>({el:h,eps:n,fill:g,fixed:S,horizontal:e,damping:c,offset:0,delta:0,scroll:N,pages:r,range(I,m,P=0){const L=I-P,U=L+m+P*2;return this.offset<L?0:this.offset>U?1:(this.offset-L)/(U-L)},curve(I,m,P=0){return Math.sin(this.range(I,m,P)*Math.PI)},visible(I,m,P=0){const L=I-P,U=L+m+P*2;return this.offset>=L&&this.offset<=U}}),[n,c,e,r]);j.useEffect(()=>{h.style.position="absolute",h.style.width="100%",h.style.height="100%",h.style[e?"overflowX":"overflowY"]="auto",h.style[e?"overflowY":"overflowX"]="hidden",h.style.top="0px",h.style.left="0px";for(const m in b)h.style[m]=b[m];S.style.position="sticky",S.style.top="0px",S.style.left="0px",S.style.width="100%",S.style.height="100%",S.style.overflow="hidden",h.appendChild(S),g.style.height=e?"100%":`${r*a*100}%`,g.style.width=e?`${r*a*100}%`:"100%",g.style.pointerEvents="none",h.appendChild(g),u?R.prepend(h):R.appendChild(h),h[e?"scrollLeft":"scrollTop"]=1;const Y=M.connected||T.domElement;requestAnimationFrame(()=>M.connect==null?void 0:M.connect(h));const I=y().events.compute;return v({compute(m,P){const{left:L,top:U}=R.getBoundingClientRect(),Z=m.clientX-L,et=m.clientY-U;P.pointer.set(Z/P.size.width*2-1,-(et/P.size.height)*2+1),P.raycaster.setFromCamera(P.pointer,P.camera)}}),()=>{R.removeChild(h),v({compute:I}),M.connect==null||M.connect(Y)}},[r,a,e,h,g,S,R]),j.useEffect(()=>{if(M.connected===h){const Y=A[e?"width":"height"],I=h[e?"scrollWidth":"scrollHeight"],m=I-Y;let P=0,L=!0,U=!0;const Z=()=>{if(!(!t||U)&&(E(),P=h[e?"scrollLeft":"scrollTop"],N.current=P/m,o)){if(!L){if(P>=m){const G=1-w.offset;h[e?"scrollLeft":"scrollTop"]=1,N.current=w.offset=-G,L=!0}else if(P<=0){const G=1+w.offset;h[e?"scrollLeft":"scrollTop"]=I,N.current=w.offset=G,L=!0}}L&&setTimeout(()=>L=!1,40)}};h.addEventListener("scroll",Z,{passive:!0}),requestAnimationFrame(()=>U=!1);const et=G=>h.scrollLeft+=G.deltaY/2;return e&&h.addEventListener("wheel",et,{passive:!0}),()=>{h.removeEventListener("scroll",Z),e&&h.removeEventListener("wheel",et)}}},[h,M,A,o,w,E,e,t]);let tt=0;return sn((Y,I)=>{tt=w.offset,tn.damp(w,"offset",N.current,c,I,s,void 0,n),tn.damp(w,"delta",Math.abs(tt-w.offset),c,I,s,void 0,n),w.delta>n&&E()}),j.createElement(yn.Provider,{value:w},f)}const Di=n=>(t,o,e)=>{const r=e.subscribe;return e.subscribe=(c,s,u)=>{let b=c;if(s){const f=(u==null?void 0:u.equalityFn)||Object.is;let y=c(e.getState());b=v=>{const T=c(v);if(!f(y,T)){const A=y;s(y=T,A)}},u!=null&&u.fireImmediately&&s(y,y)}return r(b)},n(t,o,e)};var fi=Object.defineProperty,hi=(n,t,o)=>t in n?fi(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,p=(n,t,o)=>(hi(n,typeof t!="symbol"?t+"":t,o),o);const Mt=new Un,en=new zn,pi=Math.cos(70*(Math.PI/180)),nn=(n,t)=>(n%t+t)%t;class di extends Kn{constructor(t,o){super(),p(this,"object"),p(this,"domElement"),p(this,"enabled",!0),p(this,"target",new C),p(this,"minDistance",0),p(this,"maxDistance",1/0),p(this,"minZoom",0),p(this,"maxZoom",1/0),p(this,"minPolarAngle",0),p(this,"maxPolarAngle",Math.PI),p(this,"minAzimuthAngle",-1/0),p(this,"maxAzimuthAngle",1/0),p(this,"enableDamping",!1),p(this,"dampingFactor",.05),p(this,"enableZoom",!0),p(this,"zoomSpeed",1),p(this,"enableRotate",!0),p(this,"rotateSpeed",1),p(this,"enablePan",!0),p(this,"panSpeed",1),p(this,"screenSpacePanning",!0),p(this,"keyPanSpeed",7),p(this,"zoomToCursor",!1),p(this,"autoRotate",!1),p(this,"autoRotateSpeed",2),p(this,"reverseOrbit",!1),p(this,"reverseHorizontalOrbit",!1),p(this,"reverseVerticalOrbit",!1),p(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),p(this,"mouseButtons",{LEFT:Q.ROTATE,MIDDLE:Q.DOLLY,RIGHT:Q.PAN}),p(this,"touches",{ONE:J.ROTATE,TWO:J.DOLLY_PAN}),p(this,"target0"),p(this,"position0"),p(this,"zoom0"),p(this,"_domElementKeyEvents",null),p(this,"getPolarAngle"),p(this,"getAzimuthalAngle"),p(this,"setPolarAngle"),p(this,"setAzimuthalAngle"),p(this,"getDistance"),p(this,"listenToKeyEvents"),p(this,"stopListenToKeyEvents"),p(this,"saveState"),p(this,"reset"),p(this,"update"),p(this,"connect"),p(this,"dispose"),this.object=t,this.domElement=o,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=i=>{let l=nn(i,2*Math.PI),d=f.phi;d<0&&(d+=2*Math.PI),l<0&&(l+=2*Math.PI);let _=Math.abs(l-d);2*Math.PI-_<_&&(l<d?l+=2*Math.PI:d+=2*Math.PI),y.phi=l-d,e.update()},this.setAzimuthalAngle=i=>{let l=nn(i,2*Math.PI),d=f.theta;d<0&&(d+=2*Math.PI),l<0&&(l+=2*Math.PI);let _=Math.abs(l-d);2*Math.PI-_<_&&(l<d?l+=2*Math.PI:d+=2*Math.PI),y.theta=l-d,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=i=>{i.addEventListener("keydown",Rt),this._domElementKeyEvents=i},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Rt),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(r),e.update(),u=s.NONE},this.update=(()=>{const i=new C,l=new C(0,1,0),d=new it().setFromUnitVectors(t.up,l),_=d.clone().invert(),k=new C,W=new it,$=2*Math.PI;return function(){const ae=e.object.position;d.setFromUnitVectors(t.up,l),_.copy(d).invert(),i.copy(ae).sub(e.target),i.applyQuaternion(d),f.setFromVector3(i),e.autoRotate&&u===s.NONE&&Z(L()),e.enableDamping?(f.theta+=y.theta*e.dampingFactor,f.phi+=y.phi*e.dampingFactor):(f.theta+=y.theta,f.phi+=y.phi);let q=e.minAzimuthAngle,B=e.maxAzimuthAngle;isFinite(q)&&isFinite(B)&&(q<-Math.PI?q+=$:q>Math.PI&&(q-=$),B<-Math.PI?B+=$:B>Math.PI&&(B-=$),q<=B?f.theta=Math.max(q,Math.min(B,f.theta)):f.theta=f.theta>(q+B)/2?Math.max(q,f.theta):Math.min(B,f.theta)),f.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,f.phi)),f.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(T,e.dampingFactor):e.target.add(T),e.zoomToCursor&&I||e.object.isOrthographicCamera?f.radius=xt(f.radius):f.radius=xt(f.radius*v),i.setFromSpherical(f),i.applyQuaternion(_),ae.copy(e.target).add(i),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(y.theta*=1-e.dampingFactor,y.phi*=1-e.dampingFactor,T.multiplyScalar(1-e.dampingFactor)):(y.set(0,0,0),T.set(0,0,0));let ft=!1;if(e.zoomToCursor&&I){let ht=null;if(e.object instanceof Tt&&e.object.isPerspectiveCamera){const pt=i.length();ht=xt(pt*v);const Pt=pt-ht;e.object.position.addScaledVector(tt,Pt),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const pt=new C(Y.x,Y.y,0);pt.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/v)),e.object.updateProjectionMatrix(),ft=!0;const Pt=new C(Y.x,Y.y,0);Pt.unproject(e.object),e.object.position.sub(Pt).add(pt),e.object.updateMatrixWorld(),ht=i.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;ht!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(ht).add(e.object.position):(Mt.origin.copy(e.object.position),Mt.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(Mt.direction))<pi?t.lookAt(e.target):(en.setFromNormalAndCoplanarPoint(e.object.up,e.target),Mt.intersectPlane(en,e.target))))}else e.object instanceof Ot&&e.object.isOrthographicCamera&&(ft=v!==1,ft&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/v)),e.object.updateProjectionMatrix()));return v=1,I=!1,ft||k.distanceToSquared(e.object.position)>b||8*(1-W.dot(e.object.quaternion))>b?(e.dispatchEvent(r),k.copy(e.object.position),W.copy(e.object.quaternion),ft=!1,!0):!1}})(),this.connect=i=>{e.domElement=i,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",re),e.domElement.addEventListener("pointerdown",oe),e.domElement.addEventListener("pointercancel",ut),e.domElement.addEventListener("wheel",ie)},this.dispose=()=>{var i,l,d,_,k,W;e.domElement&&(e.domElement.style.touchAction="auto"),(i=e.domElement)==null||i.removeEventListener("contextmenu",re),(l=e.domElement)==null||l.removeEventListener("pointerdown",oe),(d=e.domElement)==null||d.removeEventListener("pointercancel",ut),(_=e.domElement)==null||_.removeEventListener("wheel",ie),(k=e.domElement)==null||k.ownerDocument.removeEventListener("pointermove",jt),(W=e.domElement)==null||W.ownerDocument.removeEventListener("pointerup",ut),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Rt)};const e=this,r={type:"change"},a={type:"start"},c={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=s.NONE;const b=1e-6,f=new Kt,y=new Kt;let v=1;const T=new C,A=new z,E=new z,M=new z,h=new z,g=new z,S=new z,R=new z,N=new z,w=new z,tt=new C,Y=new z;let I=!1;const m=[],P={};function L(){return 2*Math.PI/60/60*e.autoRotateSpeed}function U(){return Math.pow(.95,e.zoomSpeed)}function Z(i){e.reverseOrbit||e.reverseHorizontalOrbit?y.theta+=i:y.theta-=i}function et(i){e.reverseOrbit||e.reverseVerticalOrbit?y.phi+=i:y.phi-=i}const G=(()=>{const i=new C;return function(d,_){i.setFromMatrixColumn(_,0),i.multiplyScalar(-d),T.add(i)}})(),qt=(()=>{const i=new C;return function(d,_){e.screenSpacePanning===!0?i.setFromMatrixColumn(_,1):(i.setFromMatrixColumn(_,0),i.crossVectors(e.object.up,i)),i.multiplyScalar(d),T.add(i)}})(),rt=(()=>{const i=new C;return function(d,_){const k=e.domElement;if(k&&e.object instanceof Tt&&e.object.isPerspectiveCamera){const W=e.object.position;i.copy(W).sub(e.target);let $=i.length();$*=Math.tan(e.object.fov/2*Math.PI/180),G(2*d*$/k.clientHeight,e.object.matrix),qt(2*_*$/k.clientHeight,e.object.matrix)}else k&&e.object instanceof Ot&&e.object.isOrthographicCamera?(G(d*(e.object.right-e.object.left)/e.object.zoom/k.clientWidth,e.object.matrix),qt(_*(e.object.top-e.object.bottom)/e.object.zoom/k.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function Lt(i){e.object instanceof Tt&&e.object.isPerspectiveCamera||e.object instanceof Ot&&e.object.isOrthographicCamera?v/=i:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Bt(i){e.object instanceof Tt&&e.object.isPerspectiveCamera||e.object instanceof Ot&&e.object.isOrthographicCamera?v*=i:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Xt(i){if(!e.zoomToCursor||!e.domElement)return;I=!0;const l=e.domElement.getBoundingClientRect(),d=i.clientX-l.left,_=i.clientY-l.top,k=l.width,W=l.height;Y.x=d/k*2-1,Y.y=-(_/W)*2+1,tt.set(Y.x,Y.y,1).unproject(e.object).sub(e.object.position).normalize()}function xt(i){return Math.max(e.minDistance,Math.min(e.maxDistance,i))}function Zt(i){A.set(i.clientX,i.clientY)}function _n(i){Xt(i),R.set(i.clientX,i.clientY)}function Gt(i){h.set(i.clientX,i.clientY)}function wn(i){E.set(i.clientX,i.clientY),M.subVectors(E,A).multiplyScalar(e.rotateSpeed);const l=e.domElement;l&&(Z(2*Math.PI*M.x/l.clientHeight),et(2*Math.PI*M.y/l.clientHeight)),A.copy(E),e.update()}function En(i){N.set(i.clientX,i.clientY),w.subVectors(N,R),w.y>0?Lt(U()):w.y<0&&Bt(U()),R.copy(N),e.update()}function Pn(i){g.set(i.clientX,i.clientY),S.subVectors(g,h).multiplyScalar(e.panSpeed),rt(S.x,S.y),h.copy(g),e.update()}function Tn(i){Xt(i),i.deltaY<0?Bt(U()):i.deltaY>0&&Lt(U()),e.update()}function On(i){let l=!1;switch(i.code){case e.keys.UP:rt(0,e.keyPanSpeed),l=!0;break;case e.keys.BOTTOM:rt(0,-e.keyPanSpeed),l=!0;break;case e.keys.LEFT:rt(e.keyPanSpeed,0),l=!0;break;case e.keys.RIGHT:rt(-e.keyPanSpeed,0),l=!0;break}l&&(i.preventDefault(),e.update())}function $t(){if(m.length==1)A.set(m[0].pageX,m[0].pageY);else{const i=.5*(m[0].pageX+m[1].pageX),l=.5*(m[0].pageY+m[1].pageY);A.set(i,l)}}function Qt(){if(m.length==1)h.set(m[0].pageX,m[0].pageY);else{const i=.5*(m[0].pageX+m[1].pageX),l=.5*(m[0].pageY+m[1].pageY);h.set(i,l)}}function Jt(){const i=m[0].pageX-m[1].pageX,l=m[0].pageY-m[1].pageY,d=Math.sqrt(i*i+l*l);R.set(0,d)}function An(){e.enableZoom&&Jt(),e.enablePan&&Qt()}function Mn(){e.enableZoom&&Jt(),e.enableRotate&&$t()}function te(i){if(m.length==1)E.set(i.pageX,i.pageY);else{const d=Nt(i),_=.5*(i.pageX+d.x),k=.5*(i.pageY+d.y);E.set(_,k)}M.subVectors(E,A).multiplyScalar(e.rotateSpeed);const l=e.domElement;l&&(Z(2*Math.PI*M.x/l.clientHeight),et(2*Math.PI*M.y/l.clientHeight)),A.copy(E)}function ee(i){if(m.length==1)g.set(i.pageX,i.pageY);else{const l=Nt(i),d=.5*(i.pageX+l.x),_=.5*(i.pageY+l.y);g.set(d,_)}S.subVectors(g,h).multiplyScalar(e.panSpeed),rt(S.x,S.y),h.copy(g)}function ne(i){const l=Nt(i),d=i.pageX-l.x,_=i.pageY-l.y,k=Math.sqrt(d*d+_*_);N.set(0,k),w.set(0,Math.pow(N.y/R.y,e.zoomSpeed)),Lt(w.y),R.copy(N)}function Sn(i){e.enableZoom&&ne(i),e.enablePan&&ee(i)}function Dn(i){e.enableZoom&&ne(i),e.enableRotate&&te(i)}function oe(i){var l,d;e.enabled!==!1&&(m.length===0&&((l=e.domElement)==null||l.ownerDocument.addEventListener("pointermove",jt),(d=e.domElement)==null||d.ownerDocument.addEventListener("pointerup",ut)),xn(i),i.pointerType==="touch"?Cn(i):In(i))}function jt(i){e.enabled!==!1&&(i.pointerType==="touch"?Ln(i):kn(i))}function ut(i){var l,d,_;jn(i),m.length===0&&((l=e.domElement)==null||l.releasePointerCapture(i.pointerId),(d=e.domElement)==null||d.ownerDocument.removeEventListener("pointermove",jt),(_=e.domElement)==null||_.ownerDocument.removeEventListener("pointerup",ut)),e.dispatchEvent(c),u=s.NONE}function In(i){let l;switch(i.button){case 0:l=e.mouseButtons.LEFT;break;case 1:l=e.mouseButtons.MIDDLE;break;case 2:l=e.mouseButtons.RIGHT;break;default:l=-1}switch(l){case Q.DOLLY:if(e.enableZoom===!1)return;_n(i),u=s.DOLLY;break;case Q.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(e.enablePan===!1)return;Gt(i),u=s.PAN}else{if(e.enableRotate===!1)return;Zt(i),u=s.ROTATE}break;case Q.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(e.enableRotate===!1)return;Zt(i),u=s.ROTATE}else{if(e.enablePan===!1)return;Gt(i),u=s.PAN}break;default:u=s.NONE}u!==s.NONE&&e.dispatchEvent(a)}function kn(i){if(e.enabled!==!1)switch(u){case s.ROTATE:if(e.enableRotate===!1)return;wn(i);break;case s.DOLLY:if(e.enableZoom===!1)return;En(i);break;case s.PAN:if(e.enablePan===!1)return;Pn(i);break}}function ie(i){e.enabled===!1||e.enableZoom===!1||u!==s.NONE&&u!==s.ROTATE||(i.preventDefault(),e.dispatchEvent(a),Tn(i),e.dispatchEvent(c))}function Rt(i){e.enabled===!1||e.enablePan===!1||On(i)}function Cn(i){switch(se(i),m.length){case 1:switch(e.touches.ONE){case J.ROTATE:if(e.enableRotate===!1)return;$t(),u=s.TOUCH_ROTATE;break;case J.PAN:if(e.enablePan===!1)return;Qt(),u=s.TOUCH_PAN;break;default:u=s.NONE}break;case 2:switch(e.touches.TWO){case J.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;An(),u=s.TOUCH_DOLLY_PAN;break;case J.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Mn(),u=s.TOUCH_DOLLY_ROTATE;break;default:u=s.NONE}break;default:u=s.NONE}u!==s.NONE&&e.dispatchEvent(a)}function Ln(i){switch(se(i),u){case s.TOUCH_ROTATE:if(e.enableRotate===!1)return;te(i),e.update();break;case s.TOUCH_PAN:if(e.enablePan===!1)return;ee(i),e.update();break;case s.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Sn(i),e.update();break;case s.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Dn(i),e.update();break;default:u=s.NONE}}function re(i){e.enabled!==!1&&i.preventDefault()}function xn(i){m.push(i)}function jn(i){delete P[i.pointerId];for(let l=0;l<m.length;l++)if(m[l].pointerId==i.pointerId){m.splice(l,1);return}}function se(i){let l=P[i.pointerId];l===void 0&&(l=new z,P[i.pointerId]=l),l.set(i.pageX,i.pageY)}function Nt(i){const l=i.pointerId===m[0].pointerId?m[1]:m[0];return P[l.pointerId]}o!==void 0&&this.connect(o),this.update()}}let mi=class extends di{constructor(t,o){super(t,o),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Q.PAN,this.mouseButtons.RIGHT=Q.ROTATE,this.touches.ONE=J.PAN,this.touches.TWO=J.DOLLY_ROTATE}};function ki(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;const o=Object.keys(n);if(o.length!==Object.keys(t).length)return!1;for(let e=0;e<o.length;e++)if(!Object.prototype.hasOwnProperty.call(t,o[e])||!Object.is(n[o[e]],t[o[e]]))return!1;return!0}const Ci=j.forwardRef((n={enableDamping:!0},t)=>{const{domElement:o,camera:e,makeDefault:r,onChange:a,onStart:c,onEnd:s,...u}=n,b=ot(g=>g.invalidate),f=ot(g=>g.camera),y=ot(g=>g.gl),v=ot(g=>g.events),T=ot(g=>g.set),A=ot(g=>g.get),E=o||v.connected||y.domElement,M=e||f,h=j.useMemo(()=>new mi(M),[M]);return j.useEffect(()=>{h.connect(E);const g=S=>{b(),a&&a(S)};return h.addEventListener("change",g),c&&h.addEventListener("start",c),s&&h.addEventListener("end",s),()=>{h.dispose(),h.removeEventListener("change",g),c&&h.removeEventListener("start",c),s&&h.removeEventListener("end",s)}},[a,c,s,h,b,E]),j.useEffect(()=>{if(r){const g=A().controls;return T({controls:h}),()=>T({controls:g})}},[r,h]),sn(()=>h.update(),-1),j.createElement("primitive",Ft({ref:t,object:h,enableDamping:!0},u))});var bn={exports:{}},yi="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",bi=yi,vi=bi;function vn(){}function gn(){}gn.resetWarningCache=vn;var gi=function(){function n(e,r,a,c,s,u){if(u!==vi){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}n.isRequired=n;function t(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:t,element:n,elementType:n,instanceOf:t,node:n,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:gn,resetWarningCache:vn};return o.PropTypes=o,o};bn.exports=gi();var _i=bn.exports;const Li=Nn(_i);export{Ci as M,Li as P,Si as S,Di as a,Mi as b,Fn as c,ki as s,Ai as u};
