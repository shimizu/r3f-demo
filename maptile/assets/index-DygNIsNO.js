import{j as $,b as _n,C as kn}from"./fiber-D0DMjeRr.js";import{r as tn}from"./react-4ldeB94U.js";import{R as bn,O as nt,c as tt}from"./drei-Y2aUxnz0.js";import{g as it,q as et}from"./three-CAajw9xd.js";import{u as rt}from"./useControls-CZA6cyBs.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function ot(n){return n.k}function ut(n){return[n.x,n.y]}function Ln(n){return function(){return n}}function lt(){let n=0,t=0,e=960,i=500,r=!0,l=!0,c=256,a=ot,v=ut,g=0;function o(){const u=+a.apply(this,arguments),f=v.apply(this,arguments),p=Math.log2(u/c),h=Math.round(Math.max(p+g,0)),d=Math.pow(2,p-h)*c,S=+f[0]-u/2,z=+f[1]-u/2,E=Math.max(r?0:-1/0,Math.floor((n-S)/d)),M=Math.min(r?1<<h:1/0,Math.ceil((e-S)/d)),m=Math.max(l?0:-1/0,Math.floor((t-z)/d)),P=Math.min(l?1<<h:1/0,Math.ceil((i-z)/d)),y=[];for(let L=m;L<P;++L)for(let I=E;I<M;++I)y.push([I,L,h]);return y.translate=[S/d,z/d],y.scale=d,y}return o.size=function(u){return arguments.length?(n=t=0,e=+u[0],i=+u[1],o):[e-n,i-t]},o.extent=function(u){return arguments.length?(n=+u[0][0],t=+u[0][1],e=+u[1][0],i=+u[1][1],o):[[n,t],[e,i]]},o.scale=function(u){return arguments.length?(a=typeof u=="function"?u:Ln(+u),o):a},o.translate=function(u){return arguments.length?(v=typeof u=="function"?u:Ln([+u[0],+u[1]]),o):v},o.zoomDelta=function(u){return arguments.length?(g=+u,o):g},o.tileSize=function(u){return arguments.length?(c=+u,o):c},o.clamp=function(u){return arguments.length?(r=l=!!u,o):r&&l},o.clampX=function(u){return arguments.length?(r=!!u,o):r},o.clampY=function(u){return arguments.length?(l=!!u,o):l},o}class ft{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const l=e[r],c=t+l,a=Math.abs(t)<Math.abs(l)?t-(c-l):l-(c-t);a&&(e[i++]=a),t=c}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,l,c=0;if(e>0){for(c=t[--e];e>0&&(i=c,r=t[--e],c=i+r,l=r-(c-i),!l););e>0&&(l<0&&t[e-1]<0||l>0&&t[e-1]>0)&&(r=l*2,i=c+r,r==i-c&&(c=i))}return c}}function*ct(n){for(const t of n)yield*t}function Wn(n){return Array.from(ct(n))}var C=1e-6,at=1e-12,R=Math.PI,H=R/2,Nn=R/4,K=R*2,j=180/R,B=R/180,T=Math.abs,Kn=Math.atan,en=Math.atan2,D=Math.cos,st=Math.exp,pt=Math.log,F=Math.sin,ht=Math.sign||function(n){return n>0?1:n<0?-1:0},Sn=Math.sqrt,gt=Math.tan;function vt(n){return n>1?0:n<-1?R:Math.acos(n)}function rn(n){return n>1?H:n<-1?-H:Math.asin(n)}function b(){}function pn(n,t){n&&Cn.hasOwnProperty(n.type)&&Cn[n.type](n,t)}var An={Feature:function(n,t){pn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)pn(e[i].geometry,t)}},Cn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){En(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)En(e[i],t,0)},Polygon:function(n,t){On(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)On(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)pn(e[i],t)}};function En(n,t,e){var i=-1,r=n.length-e,l;for(t.lineStart();++i<r;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function On(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)En(n[e],t,1);t.polygonEnd()}function St(n,t){n&&An.hasOwnProperty(n.type)?An[n.type](n,t):pn(n,t)}function Mn(n){return[en(n[1],n[0]),rn(n[2])]}function Z(n){var t=n[0],e=n[1],i=D(e);return[i*D(t),i*F(t),F(e)]}function ln(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function hn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function mn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function fn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function yn(n){var t=Sn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function wn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Pn(n,t){return T(n)>R&&(n-=Math.round(n/K)*K),[n,t]}Pn.invert=Pn;function Jn(n,t,e){return(n%=K)?t||e?wn(qn(n),Dn(t,e)):qn(n):t||e?Dn(t,e):Pn}function Tn(n){return function(t,e){return t+=n,T(t)>R&&(t-=Math.round(t/K)*K),[t,e]}}function qn(n){var t=Tn(n);return t.invert=Tn(-n),t}function Dn(n,t){var e=D(n),i=F(n),r=D(t),l=F(t);function c(a,v){var g=D(v),o=D(a)*g,u=F(a)*g,f=F(v),p=f*e+o*i;return[en(u*r-p*l,o*e-f*i),rn(p*r+u*l)]}return c.invert=function(a,v){var g=D(v),o=D(a)*g,u=F(a)*g,f=F(v),p=f*r-u*l;return[en(u*r+f*l,o*e+p*i),rn(p*e-o*i)]},c}function mt(n){n=Jn(n[0]*B,n[1]*B,n.length>2?n[2]*B:0);function t(e){return e=n(e[0]*B,e[1]*B),e[0]*=j,e[1]*=j,e}return t.invert=function(e){return e=n.invert(e[0]*B,e[1]*B),e[0]*=j,e[1]*=j,e},t}function dt(n,t,e,i,r,l){if(e){var c=D(t),a=F(t),v=i*e;r==null?(r=t+i*K,l=t-v/2):(r=Fn(c,r),l=Fn(c,l),(i>0?r<l:r>l)&&(r+=i*K));for(var g,o=r;i>0?o>l:o<l;o-=v)g=Mn([c,-a*D(o),-a*F(o)]),n.point(g[0],g[1])}}function Fn(n,t){t=Z(t),t[0]-=n,yn(t);var e=vt(-t[1]);return((-t[2]<0?-e:e)+K-C)%K}function Qn(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:b,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function sn(n,t){return T(n[0]-t[0])<C&&T(n[1]-t[1])<C}function cn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Un(n,t,e,i,r){var l=[],c=[],a,v;if(n.forEach(function(h){if(!((d=h.length-1)<=0)){var d,S=h[0],z=h[d],E;if(sn(S,z)){if(!S[2]&&!z[2]){for(r.lineStart(),a=0;a<d;++a)r.point((S=h[a])[0],S[1]);r.lineEnd();return}z[0]+=2*C}l.push(E=new cn(S,h,null,!0)),c.push(E.o=new cn(S,null,E,!1)),l.push(E=new cn(z,h,null,!1)),c.push(E.o=new cn(z,null,E,!0))}}),!!l.length){for(c.sort(t),Bn(l),Bn(c),a=0,v=c.length;a<v;++a)c[a].e=e=!e;for(var g=l[0],o,u;;){for(var f=g,p=!0;f.v;)if((f=f.n)===g)return;o=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,v=o.length;a<v;++a)r.point((u=o[a])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(o=f.p.z,a=o.length-1;a>=0;--a)r.point((u=o[a])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,o=f.z,p=!p}while(!f.v);r.lineEnd()}}}function Bn(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function dn(n){return T(n[0])<=R?n[0]:ht(n[0])*((T(n[0])+R)%K-R)}function Et(n,t){var e=dn(t),i=t[1],r=F(i),l=[F(e),-D(e),0],c=0,a=0,v=new ft;r===1?i=H+C:r===-1&&(i=-H-C);for(var g=0,o=n.length;g<o;++g)if(f=(u=n[g]).length)for(var u,f,p=u[f-1],h=dn(p),d=p[1]/2+Nn,S=F(d),z=D(d),E=0;E<f;++E,h=m,S=y,z=L,p=M){var M=u[E],m=dn(M),P=M[1]/2+Nn,y=F(P),L=D(P),I=m-h,N=I>=0?1:-1,O=N*I,w=O>R,X=S*y;if(v.add(en(X*N*F(O),z*L+X*D(O))),c+=w?I+N*K:I,w^h>=e^m>=e){var q=hn(Z(p),Z(M));yn(q);var A=hn(l,q);yn(A);var s=(w^I>=0?-1:1)*rn(A[2]);(i>s||i===s&&(q[0]||q[1]))&&(a+=w^I>=0?1:-1)}}return(c<-C||c<C&&v<-at)^a&1}function Vn(n,t,e,i){return function(r){var l=t(r),c=Qn(),a=t(c),v=!1,g,o,u,f={point:p,lineStart:d,lineEnd:S,polygonStart:function(){f.point=z,f.lineStart=E,f.lineEnd=M,o=[],g=[]},polygonEnd:function(){f.point=p,f.lineStart=d,f.lineEnd=S,o=Wn(o);var m=Et(g,i);o.length?(v||(r.polygonStart(),v=!0),Un(o,yt,m,e,r)):m&&(v||(r.polygonStart(),v=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),v&&(r.polygonEnd(),v=!1),o=g=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(m,P){n(m,P)&&r.point(m,P)}function h(m,P){l.point(m,P)}function d(){f.point=h,l.lineStart()}function S(){f.point=p,l.lineEnd()}function z(m,P){u.push([m,P]),a.point(m,P)}function E(){a.lineStart(),u=[]}function M(){z(u[0][0],u[0][1]),a.lineEnd();var m=a.clean(),P=c.result(),y,L=P.length,I,N,O;if(u.pop(),g.push(u),u=null,!!L){if(m&1){if(N=P[0],(I=N.length-1)>0){for(v||(r.polygonStart(),v=!0),r.lineStart(),y=0;y<I;++y)r.point((O=N[y])[0],O[1]);r.lineEnd()}return}L>1&&m&2&&P.push(P.pop().concat(P.shift())),o.push(P.filter(Mt))}}return f}}function Mt(n){return n.length>1}function yt(n,t){return((n=n.x)[0]<0?n[1]-H-C:H-n[1])-((t=t.x)[0]<0?t[1]-H-C:H-t[1])}const $n=Vn(function(){return!0},wt,zt,[-R,-H]);function wt(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(l,c){var a=l>0?R:-R,v=T(l-t);T(v-R)<C?(n.point(t,e=(e+c)/2>0?H:-H),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(l,e),r=0):i!==a&&v>=R&&(T(t-i)<C&&(t-=i*C),T(l-a)<C&&(l-=a*C),e=Pt(t,e,l,c),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),r=0),n.point(t=l,e=c),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function Pt(n,t,e,i){var r,l,c=F(n-e);return T(c)>C?Kn((F(t)*(l=D(i))*F(e)-F(i)*(r=D(t))*F(n))/(r*l*c)):(t+i)/2}function zt(n,t,e,i){var r;if(n==null)r=e*H,i.point(-R,r),i.point(0,r),i.point(R,r),i.point(R,0),i.point(R,-r),i.point(0,-r),i.point(-R,-r),i.point(-R,0),i.point(-R,r);else if(T(n[0]-t[0])>C){var l=n[0]<t[0]?R:-R;r=e*l/2,i.point(-l,r),i.point(0,r),i.point(l,r)}else i.point(t[0],t[1])}function It(n){var t=D(n),e=2*B,i=t>0,r=T(t)>C;function l(o,u,f,p){dt(p,n,e,f,o,u)}function c(o,u){return D(o)*D(u)>t}function a(o){var u,f,p,h,d;return{lineStart:function(){h=p=!1,d=1},point:function(S,z){var E=[S,z],M,m=c(S,z),P=i?m?0:g(S,z):m?g(S+(S<0?R:-R),z):0;if(!u&&(h=p=m)&&o.lineStart(),m!==p&&(M=v(u,E),(!M||sn(u,M)||sn(E,M))&&(E[2]=1)),m!==p)d=0,m?(o.lineStart(),M=v(E,u),o.point(M[0],M[1])):(M=v(u,E),o.point(M[0],M[1],2),o.lineEnd()),u=M;else if(r&&u&&i^m){var y;!(P&f)&&(y=v(E,u,!0))&&(d=0,i?(o.lineStart(),o.point(y[0][0],y[0][1]),o.point(y[1][0],y[1][1]),o.lineEnd()):(o.point(y[1][0],y[1][1]),o.lineEnd(),o.lineStart(),o.point(y[0][0],y[0][1],3)))}m&&(!u||!sn(u,E))&&o.point(E[0],E[1]),u=E,p=m,f=P},lineEnd:function(){p&&o.lineEnd(),u=null},clean:function(){return d|(h&&p)<<1}}}function v(o,u,f){var p=Z(o),h=Z(u),d=[1,0,0],S=hn(p,h),z=ln(S,S),E=S[0],M=z-E*E;if(!M)return!f&&o;var m=t*z/M,P=-t*E/M,y=hn(d,S),L=fn(d,m),I=fn(S,P);mn(L,I);var N=y,O=ln(L,N),w=ln(N,N),X=O*O-w*(ln(L,L)-1);if(!(X<0)){var q=Sn(X),A=fn(N,(-O-q)/w);if(mn(A,L),A=Mn(A),!f)return A;var s=o[0],x=u[0],G=o[1],Y=u[1],W;x<s&&(W=s,s=x,x=W);var k=x-s,J=T(k-R)<C,U=J||k<C;if(!J&&Y<G&&(W=G,G=Y,Y=W),U?J?G+Y>0^A[1]<(T(A[0]-s)<C?G:Y):G<=A[1]&&A[1]<=Y:k>R^(s<=A[0]&&A[0]<=x)){var Q=fn(N,(-O+q)/w);return mn(Q,L),[A,Mn(Q)]}}}function g(o,u){var f=i?n:R-n,p=0;return o<-f?p|=1:o>f&&(p|=2),u<-f?p|=4:u>f&&(p|=8),p}return Vn(c,a,l,i?[0,-n]:[-R,n-R])}function xt(n,t,e,i,r,l){var c=n[0],a=n[1],v=t[0],g=t[1],o=0,u=1,f=v-c,p=g-a,h;if(h=e-c,!(!f&&h>0)){if(h/=f,f<0){if(h<o)return;h<u&&(u=h)}else if(f>0){if(h>u)return;h>o&&(o=h)}if(h=r-c,!(!f&&h<0)){if(h/=f,f<0){if(h>u)return;h>o&&(o=h)}else if(f>0){if(h<o)return;h<u&&(u=h)}if(h=i-a,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<u&&(u=h)}else if(p>0){if(h>u)return;h>o&&(o=h)}if(h=l-a,!(!p&&h<0)){if(h/=p,p<0){if(h>u)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<u&&(u=h)}return o>0&&(n[0]=c+o*f,n[1]=a+o*p),u<1&&(t[0]=c+u*f,t[1]=a+u*p),!0}}}}}var nn=1e9,an=-nn;function Rt(n,t,e,i){function r(g,o){return n<=g&&g<=e&&t<=o&&o<=i}function l(g,o,u,f){var p=0,h=0;if(g==null||(p=c(g,u))!==(h=c(o,u))||v(g,o)<0^u>0)do f.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+u+4)%4)!==h);else f.point(o[0],o[1])}function c(g,o){return T(g[0]-n)<C?o>0?0:3:T(g[0]-e)<C?o>0?2:1:T(g[1]-t)<C?o>0?1:0:o>0?3:2}function a(g,o){return v(g.x,o.x)}function v(g,o){var u=c(g,1),f=c(o,1);return u!==f?u-f:u===0?o[1]-g[1]:u===1?g[0]-o[0]:u===2?g[1]-o[1]:o[0]-g[0]}return function(g){var o=g,u=Qn(),f,p,h,d,S,z,E,M,m,P,y,L={point:I,lineStart:X,lineEnd:q,polygonStart:O,polygonEnd:w};function I(s,x){r(s,x)&&o.point(s,x)}function N(){for(var s=0,x=0,G=p.length;x<G;++x)for(var Y=p[x],W=1,k=Y.length,J=Y[0],U,Q,un=J[0],V=J[1];W<k;++W)U=un,Q=V,J=Y[W],un=J[0],V=J[1],Q<=i?V>i&&(un-U)*(i-Q)>(V-Q)*(n-U)&&++s:V<=i&&(un-U)*(i-Q)<(V-Q)*(n-U)&&--s;return s}function O(){o=u,f=[],p=[],y=!0}function w(){var s=N(),x=y&&s,G=(f=Wn(f)).length;(x||G)&&(g.polygonStart(),x&&(g.lineStart(),l(null,null,1,g),g.lineEnd()),G&&Un(f,a,s,l,g),g.polygonEnd()),o=g,f=p=h=null}function X(){L.point=A,p&&p.push(h=[]),P=!0,m=!1,E=M=NaN}function q(){f&&(A(d,S),z&&m&&u.rejoin(),f.push(u.result())),L.point=I,m&&o.lineEnd()}function A(s,x){var G=r(s,x);if(p&&h.push([s,x]),P)d=s,S=x,z=G,P=!1,G&&(o.lineStart(),o.point(s,x));else if(G&&m)o.point(s,x);else{var Y=[E=Math.max(an,Math.min(nn,E)),M=Math.max(an,Math.min(nn,M))],W=[s=Math.max(an,Math.min(nn,s)),x=Math.max(an,Math.min(nn,x))];xt(Y,W,n,t,e,i)?(m||(o.lineStart(),o.point(Y[0],Y[1])),o.point(W[0],W[1]),G||o.lineEnd(),y=!1):G&&(o.lineStart(),o.point(s,x),y=!1)}E=s,M=x,m=G}return L}}const Gn=n=>n;var _=1/0,gn=_,on=-_,vn=on,Xn={point:Lt,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b,result:function(){var n=[[_,gn],[on,vn]];return on=vn=-(gn=_=1/0),n}};function Lt(n,t){n<_&&(_=n),n>on&&(on=n),t<gn&&(gn=t),t>vn&&(vn=t)}function In(n){return function(t){var e=new zn;for(var i in n)e[i]=n[i];return e.stream=t,e}}function zn(){}zn.prototype={constructor:zn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function xn(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),St(e,n.stream(Xn)),t(Xn.result()),i!=null&&n.clipExtent(i),n}function Zn(n,t,e){return xn(n,function(i){var r=t[1][0]-t[0][0],l=t[1][1]-t[0][1],c=Math.min(r/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),a=+t[0][0]+(r-c*(i[1][0]+i[0][0]))/2,v=+t[0][1]+(l-c*(i[1][1]+i[0][1]))/2;n.scale(150*c).translate([a,v])},e)}function Nt(n,t,e){return Zn(n,[[0,0],t],e)}function At(n,t,e){return xn(n,function(i){var r=+t,l=r/(i[1][0]-i[0][0]),c=(r-l*(i[1][0]+i[0][0]))/2,a=-l*i[0][1];n.scale(150*l).translate([c,a])},e)}function Ct(n,t,e){return xn(n,function(i){var r=+t,l=r/(i[1][1]-i[0][1]),c=-l*i[0][0],a=(r-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([c,a])},e)}var Yn=16,Ot=D(30*B);function Hn(n,t){return+t?qt(n,t):Tt(n)}function Tt(n){return In({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function qt(n,t){function e(i,r,l,c,a,v,g,o,u,f,p,h,d,S){var z=g-i,E=o-r,M=z*z+E*E;if(M>4*t&&d--){var m=c+f,P=a+p,y=v+h,L=Sn(m*m+P*P+y*y),I=rn(y/=L),N=T(T(y)-1)<C||T(l-u)<C?(l+u)/2:en(P,m),O=n(N,I),w=O[0],X=O[1],q=w-i,A=X-r,s=E*q-z*A;(s*s/M>t||T((z*q+E*A)/M-.5)>.3||c*f+a*p+v*h<Ot)&&(e(i,r,l,c,a,v,w,X,N,m/=L,P/=L,y,d,S),S.point(w,X),e(w,X,N,m,P,y,g,o,u,f,p,h,d,S))}}return function(i){var r,l,c,a,v,g,o,u,f,p,h,d,S={point:z,lineStart:E,lineEnd:m,polygonStart:function(){i.polygonStart(),S.lineStart=P},polygonEnd:function(){i.polygonEnd(),S.lineStart=E}};function z(I,N){I=n(I,N),i.point(I[0],I[1])}function E(){u=NaN,S.point=M,i.lineStart()}function M(I,N){var O=Z([I,N]),w=n(I,N);e(u,f,o,p,h,d,u=w[0],f=w[1],o=I,p=O[0],h=O[1],d=O[2],Yn,i),i.point(u,f)}function m(){S.point=z,i.lineEnd()}function P(){E(),S.point=y,S.lineEnd=L}function y(I,N){M(r=I,N),l=u,c=f,a=p,v=h,g=d,S.point=M}function L(){e(u,f,o,p,h,d,l,c,r,a,v,g,Yn,i),S.lineEnd=m,m()}return S}}var Dt=In({point:function(n,t){this.stream.point(n*B,t*B)}});function Ft(n){return In({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Bt(n,t,e,i,r){function l(c,a){return c*=i,a*=r,[t+n*c,e-n*a]}return l.invert=function(c,a){return[(c-t)/n*i,(e-a)/n*r]},l}function jn(n,t,e,i,r,l){if(!l)return Bt(n,t,e,i,r);var c=D(l),a=F(l),v=c*n,g=a*n,o=c/n,u=a/n,f=(a*e-c*t)/n,p=(a*t+c*e)/n;function h(d,S){return d*=i,S*=r,[v*d-g*S+t,e-g*d-v*S]}return h.invert=function(d,S){return[i*(o*d-u*S+f),r*(p-u*d-o*S)]},h}function $t(n){return Gt(function(){return n})()}function Gt(n){var t,e=150,i=480,r=250,l=0,c=0,a=0,v=0,g=0,o,u=0,f=1,p=1,h=null,d=$n,S=null,z,E,M,m=Gn,P=.5,y,L,I,N,O;function w(s){return I(s[0]*B,s[1]*B)}function X(s){return s=I.invert(s[0],s[1]),s&&[s[0]*j,s[1]*j]}w.stream=function(s){return N&&O===s?N:N=Dt(Ft(o)(d(y(m(O=s)))))},w.preclip=function(s){return arguments.length?(d=s,h=void 0,A()):d},w.postclip=function(s){return arguments.length?(m=s,S=z=E=M=null,A()):m},w.clipAngle=function(s){return arguments.length?(d=+s?It(h=s*B):(h=null,$n),A()):h*j},w.clipExtent=function(s){return arguments.length?(m=s==null?(S=z=E=M=null,Gn):Rt(S=+s[0][0],z=+s[0][1],E=+s[1][0],M=+s[1][1]),A()):S==null?null:[[S,z],[E,M]]},w.scale=function(s){return arguments.length?(e=+s,q()):e},w.translate=function(s){return arguments.length?(i=+s[0],r=+s[1],q()):[i,r]},w.center=function(s){return arguments.length?(l=s[0]%360*B,c=s[1]%360*B,q()):[l*j,c*j]},w.rotate=function(s){return arguments.length?(a=s[0]%360*B,v=s[1]%360*B,g=s.length>2?s[2]%360*B:0,q()):[a*j,v*j,g*j]},w.angle=function(s){return arguments.length?(u=s%360*B,q()):u*j},w.reflectX=function(s){return arguments.length?(f=s?-1:1,q()):f<0},w.reflectY=function(s){return arguments.length?(p=s?-1:1,q()):p<0},w.precision=function(s){return arguments.length?(y=Hn(L,P=s*s),A()):Sn(P)},w.fitExtent=function(s,x){return Zn(w,s,x)},w.fitSize=function(s,x){return Nt(w,s,x)},w.fitWidth=function(s,x){return At(w,s,x)},w.fitHeight=function(s,x){return Ct(w,s,x)};function q(){var s=jn(e,0,0,f,p,u).apply(null,t(l,c)),x=jn(e,i-s[0],r-s[1],f,p,u);return o=Jn(a,v,g),L=wn(t,x),I=wn(o,L),y=Hn(L,P),A()}function A(){return N=O=null,w}return function(){return t=n.apply(this,arguments),w.invert=t.invert&&X,q()}}function Rn(n,t){return[n,pt(gt((H+t)/2))]}Rn.invert=function(n,t){return[n,2*Kn(st(t))-H]};function Xt(){return Yt(Rn).scale(961/K)}function Yt(n){var t=$t(n),e=t.center,i=t.scale,r=t.translate,l=t.clipExtent,c=null,a,v,g;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(r(u),o()):r()},t.center=function(u){return arguments.length?(e(u),o()):e()},t.clipExtent=function(u){return arguments.length?(u==null?c=a=v=g=null:(c=+u[0][0],a=+u[0][1],v=+u[1][0],g=+u[1][1]),o()):c==null?null:[[c,a],[v,g]]};function o(){var u=R*i(),f=t(mt(t.rotate()).invert([0,0]));return l(c==null?[[f[0]-u,f[1]-u],[f[0]+u,f[1]+u]]:n===Rn?[[Math.max(f[0]-u,c),a],[Math.min(f[0]+u,v),g]]:[[c,Math.max(f[1]-u,a)],[v,Math.min(f[1]+u,g)]])}return o()}function Ht({x:n,y:t,z:e,margin:i,index:r,length:l}){const c=`https://tile.openstreetmap.org/${e}/${n}/${t}.png`,a=_n(et,c),v=Math.sqrt(l),g=r%v*(1+i),o=-Math.floor(r/v)*(1+i);return new it(Math.random(),Math.random(),Math.random()),$.jsxs("mesh",{position:[g-v/2,o+v/2,0],children:[$.jsx("planeGeometry",{args:[1,1]}),$.jsx("meshBasicMaterial",{map:a})]})}function jt({longitude:n,latitude:t,zoom:e}){const i=e,r=1024,l=1024,c=[n,t],a=0,v=tn.useMemo(()=>Xt().center(c).scale(Math.pow(2,i+8)/(2*Math.PI)).translate([r/2,l/2]),[r,l,i,c]),g=tn.useMemo(()=>{const o=lt().size([r,l]).scale(v.scale()*2*Math.PI).translate(v([0,0]));return console.log("タイル数: ",o().length),o()},[r,l,v]);return $.jsx($.Fragment,{children:g.map(([o,u,f],p)=>$.jsx(Ht,{x:o,y:u,z:f,margin:a,index:p,length:g.length},p))})}function Wt(){const n=tn.useRef();return tn.useEffect(()=>{const t=n.current;if(t){const e=()=>{};return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)}}},[]),$.jsx(nt,{ref:n})}function Kt(){const{latitude:n,longitude:t,zoom:e}=rt({longitude:{value:-122.4183,min:-180,max:180,step:.01},latitude:{value:37.775,min:-90,max:90,step:.01},zoom:{value:12,min:0,max:19,step:1}});return $.jsxs($.Fragment,{children:[$.jsx(Wt,{}),$.jsx(bn,{}),$.jsx("group",{children:$.jsx(jt,{latitude:n,longitude:t,zoom:e})})]})}function Jt(){return $.jsx($.Fragment,{children:$.jsx(kn,{shadows:!0,camera:{position:[0,0,4]},children:$.jsx(Kt,{})})})}tt(document.getElementById("root")).render($.jsx(tn.StrictMode,{children:$.jsx(Jt,{})}));
