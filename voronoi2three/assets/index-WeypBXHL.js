import{u as Pt,j as K,C as Et}from"./fiber-C41EkOHI.js";import{r as yt}from"./react-C_gYsUBP.js";import{O as Nt,c as Ct}from"./drei-LdGto6su.js";import{a0 as jt,a1 as Lt,a2 as lt,g as W,f as dt,a3 as Ot,a4 as Rt,a5 as Bt,a6 as bt,B as Gt,a7 as kt,a8 as at,o as Vt,a9 as wt,C as Wt,aa as qt,H as Ft}from"./three-DrGEC3NH.js";import{E as Dt,B as Ht}from"./postprocessing-DTbNLQ51.js";(function(){const P=document.createElement("link").relList;if(P&&P.supports&&P.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))j(A);new MutationObserver(A=>{for(const d of A)if(d.type==="childList")for(const z of d.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&j(z)}).observe(document,{childList:!0,subtree:!0});function q(A){const d={};return A.integrity&&(d.integrity=A.integrity),A.referrerPolicy&&(d.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?d.credentials="include":A.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function j(A){if(A.ep)return;A.ep=!0;const d=q(A);fetch(A.href,d)}})();const zt=Vt;class mt extends jt{constructor(P){super(P),this.defaultDPI=90,this.defaultUnit="px"}load(P,q,j,A){const d=this,z=new Lt(d.manager);z.setPath(d.path),z.setRequestHeader(d.requestHeader),z.setWithCredentials(d.withCredentials),z.load(P,function(F){try{q(d.parse(F))}catch(X){A?A(X):console.error(X),d.manager.itemError(P)}},j,A)}parse(P){const q=this;function j(r,s){if(r.nodeType!==1)return;const e=M(r);let t=!1,c=null;switch(r.nodeName){case"svg":s=U(r,s);break;case"style":d(r);break;case"g":s=U(r,s);break;case"path":s=U(r,s),r.hasAttribute("d")&&(c=A(r));break;case"rect":s=U(r,s),c=X(r);break;case"polygon":s=U(r,s),c=v(r);break;case"polyline":s=U(r,s),c=Q(r);break;case"circle":s=U(r,s),c=G(r);break;case"ellipse":s=U(r,s),c=V(r);break;case"line":s=U(r,s),c=st(r);break;case"defs":t=!0;break;case"use":s=U(r,s);const p=(r.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),m=r.viewportElement.getElementById(p);m?j(m,s):console.warn("SVGLoader: 'use node' references non-existent node id: "+p);break}c&&(s.fill!==void 0&&s.fill!=="none"&&c.color.setStyle(s.fill,zt),N(c,ot),w.push(c),c.userData={node:r,style:s});const u=r.childNodes;for(let i=0;i<u.length;i++){const p=u[i];t&&p.nodeName!=="style"&&p.nodeName!=="defs"||j(p,s)}e&&(H.pop(),H.length>0?ot.copy(H[H.length-1]):ot.identity())}function A(r){const s=new at,e=new W,t=new W,c=new W;let u=!0,i=!1;const p=r.getAttribute("d");if(p===""||p==="none")return null;const m=p.match(/[a-df-z][^a-df-z]*/ig);for(let x=0,a=m.length;x<a;x++){const l=m[x],b=l.charAt(0),k=l.slice(1).trim();u===!0&&(i=!0,u=!1);let o;switch(b){case"M":o=y(k);for(let n=0,T=o.length;n<T;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&c.copy(e);break;case"H":o=y(k);for(let n=0,T=o.length;n<T;n++)e.x=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"V":o=y(k);for(let n=0,T=o.length;n<T;n++)e.y=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"L":o=y(k);for(let n=0,T=o.length;n<T;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"C":o=y(k);for(let n=0,T=o.length;n<T;n+=6)s.bezierCurveTo(o[n+0],o[n+1],o[n+2],o[n+3],o[n+4],o[n+5]),t.x=o[n+2],t.y=o[n+3],e.x=o[n+4],e.y=o[n+5],n===0&&i===!0&&c.copy(e);break;case"S":o=y(k);for(let n=0,T=o.length;n<T;n+=4)s.bezierCurveTo(g(e.x,t.x),g(e.y,t.y),o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&i===!0&&c.copy(e);break;case"Q":o=y(k);for(let n=0,T=o.length;n<T;n+=4)s.quadraticCurveTo(o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&i===!0&&c.copy(e);break;case"T":o=y(k);for(let n=0,T=o.length;n<T;n+=2){const B=g(e.x,t.x),nt=g(e.y,t.y);s.quadraticCurveTo(B,nt,o[n+0],o[n+1]),t.x=B,t.y=nt,e.x=o[n+0],e.y=o[n+1],n===0&&i===!0&&c.copy(e)}break;case"A":o=y(k,[3,4],7);for(let n=0,T=o.length;n<T;n+=7){if(o[n+5]==e.x&&o[n+6]==e.y)continue;const B=e.clone();e.x=o[n+5],e.y=o[n+6],t.x=e.x,t.y=e.y,z(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],B,e),n===0&&i===!0&&c.copy(e)}break;case"m":o=y(k);for(let n=0,T=o.length;n<T;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&c.copy(e);break;case"h":o=y(k);for(let n=0,T=o.length;n<T;n++)e.x+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"v":o=y(k);for(let n=0,T=o.length;n<T;n++)e.y+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"l":o=y(k);for(let n=0,T=o.length;n<T;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"c":o=y(k);for(let n=0,T=o.length;n<T;n+=6)s.bezierCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3],e.x+o[n+4],e.y+o[n+5]),t.x=e.x+o[n+2],t.y=e.y+o[n+3],e.x+=o[n+4],e.y+=o[n+5],n===0&&i===!0&&c.copy(e);break;case"s":o=y(k);for(let n=0,T=o.length;n<T;n+=4)s.bezierCurveTo(g(e.x,t.x),g(e.y,t.y),e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&i===!0&&c.copy(e);break;case"q":o=y(k);for(let n=0,T=o.length;n<T;n+=4)s.quadraticCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&i===!0&&c.copy(e);break;case"t":o=y(k);for(let n=0,T=o.length;n<T;n+=2){const B=g(e.x,t.x),nt=g(e.y,t.y);s.quadraticCurveTo(B,nt,e.x+o[n+0],e.y+o[n+1]),t.x=B,t.y=nt,e.x=e.x+o[n+0],e.y=e.y+o[n+1],n===0&&i===!0&&c.copy(e)}break;case"a":o=y(k,[3,4],7);for(let n=0,T=o.length;n<T;n+=7){if(o[n+5]==0&&o[n+6]==0)continue;const B=e.clone();e.x+=o[n+5],e.y+=o[n+6],t.x=e.x,t.y=e.y,z(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],B,e),n===0&&i===!0&&c.copy(e)}break;case"Z":case"z":s.currentPath.autoClose=!0,s.currentPath.curves.length>0&&(e.copy(c),s.currentPath.currentPoint.copy(e),u=!0);break;default:console.warn(l)}i=!1}return s}function d(r){if(!(!r.sheet||!r.sheet.cssRules||!r.sheet.cssRules.length))for(let s=0;s<r.sheet.cssRules.length;s++){const e=r.sheet.cssRules[s];if(e.type!==1)continue;const t=e.selectorText.split(/,/gm).filter(Boolean).map(c=>c.trim());for(let c=0;c<t.length;c++){const u=Object.fromEntries(Object.entries(e.style).filter(([,i])=>i!==""));Y[t[c]]=Object.assign(Y[t[c]]||{},u)}}}function z(r,s,e,t,c,u,i,p){if(s==0||e==0){r.lineTo(p.x,p.y);return}t=t*Math.PI/180,s=Math.abs(s),e=Math.abs(e);const m=(i.x-p.x)/2,x=(i.y-p.y)/2,a=Math.cos(t)*m+Math.sin(t)*x,l=-Math.sin(t)*m+Math.cos(t)*x;let b=s*s,k=e*e;const o=a*a,n=l*l,T=o/b+n/k;if(T>1){const pt=Math.sqrt(T);s=pt*s,e=pt*e,b=s*s,k=e*e}const B=b*n+k*o,nt=(b*k-B)/B;let rt=Math.sqrt(Math.max(0,nt));c===u&&(rt=-rt);const _=rt*s*l/e,it=-rt*e*a/s,ut=Math.cos(t)*_-Math.sin(t)*it+(i.x+p.x)/2,Tt=Math.sin(t)*_+Math.cos(t)*it+(i.y+p.y)/2,ht=F(1,0,(a-_)/s,(l-it)/e),gt=F((a-_)/s,(l-it)/e,(-a-_)/s,(-l-it)/e)%(Math.PI*2);r.currentPath.absellipse(ut,Tt,s,e,ht,ht+gt,u===0,t)}function F(r,s,e,t){const c=r*e+s*t,u=Math.sqrt(r*r+s*s)*Math.sqrt(e*e+t*t);let i=Math.acos(Math.max(-1,Math.min(1,c/u)));return r*t-s*e<0&&(i=-i),i}function X(r){const s=h(r.getAttribute("x")||0),e=h(r.getAttribute("y")||0),t=h(r.getAttribute("rx")||r.getAttribute("ry")||0),c=h(r.getAttribute("ry")||r.getAttribute("rx")||0),u=h(r.getAttribute("width")),i=h(r.getAttribute("height")),p=1-.551915024494,m=new at;return m.moveTo(s+t,e),m.lineTo(s+u-t,e),(t!==0||c!==0)&&m.bezierCurveTo(s+u-t*p,e,s+u,e+c*p,s+u,e+c),m.lineTo(s+u,e+i-c),(t!==0||c!==0)&&m.bezierCurveTo(s+u,e+i-c*p,s+u-t*p,e+i,s+u-t,e+i),m.lineTo(s+t,e+i),(t!==0||c!==0)&&m.bezierCurveTo(s+t*p,e+i,s,e+i-c*p,s,e+i-c),m.lineTo(s,e+c),(t!==0||c!==0)&&m.bezierCurveTo(s,e+c*p,s+t*p,e,s+t,e),m}function v(r){function s(u,i,p){const m=h(i),x=h(p);c===0?t.moveTo(m,x):t.lineTo(m,x),c++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new at;let c=0;return r.getAttribute("points").replace(e,s),t.currentPath.autoClose=!0,t}function Q(r){function s(u,i,p){const m=h(i),x=h(p);c===0?t.moveTo(m,x):t.lineTo(m,x),c++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new at;let c=0;return r.getAttribute("points").replace(e,s),t.currentPath.autoClose=!1,t}function G(r){const s=h(r.getAttribute("cx")||0),e=h(r.getAttribute("cy")||0),t=h(r.getAttribute("r")||0),c=new bt;c.absarc(s,e,t,0,Math.PI*2);const u=new at;return u.subPaths.push(c),u}function V(r){const s=h(r.getAttribute("cx")||0),e=h(r.getAttribute("cy")||0),t=h(r.getAttribute("rx")||0),c=h(r.getAttribute("ry")||0),u=new bt;u.absellipse(s,e,t,c,0,Math.PI*2);const i=new at;return i.subPaths.push(u),i}function st(r){const s=h(r.getAttribute("x1")||0),e=h(r.getAttribute("y1")||0),t=h(r.getAttribute("x2")||0),c=h(r.getAttribute("y2")||0),u=new at;return u.moveTo(s,e),u.lineTo(t,c),u.currentPath.autoClose=!1,u}function U(r,s){s=Object.assign({},s);let e={};if(r.hasAttribute("class")){const i=r.getAttribute("class").split(/\s/).filter(Boolean).map(p=>p.trim());for(let p=0;p<i.length;p++)e=Object.assign(e,Y["."+i[p]])}r.hasAttribute("id")&&(e=Object.assign(e,Y["#"+r.getAttribute("id")]));function t(i,p,m){m===void 0&&(m=function(a){return a.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),a}),r.hasAttribute(i)&&(s[p]=m(r.getAttribute(i))),e[i]&&(s[p]=m(e[i])),r.style&&r.style[i]!==""&&(s[p]=m(r.style[i]))}function c(i){return Math.max(0,Math.min(1,h(i)))}function u(i){return Math.max(0,h(i))}return t("fill","fill"),t("fill-opacity","fillOpacity",c),t("fill-rule","fillRule"),t("opacity","opacity",c),t("stroke","stroke"),t("stroke-opacity","strokeOpacity",c),t("stroke-width","strokeWidth",u),t("stroke-linejoin","strokeLineJoin"),t("stroke-linecap","strokeLineCap"),t("stroke-miterlimit","strokeMiterLimit",u),t("visibility","visibility"),s}function g(r,s){return r-(s-r)}function y(r,s,e){if(typeof r!="string")throw new TypeError("Invalid input: "+typeof r);const t={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},c=0,u=1,i=2,p=3;let m=c,x=!0,a="",l="";const b=[];function k(B,nt,rt){const _=new SyntaxError('Unexpected character "'+B+'" at index '+nt+".");throw _.partial=rt,_}function o(){a!==""&&(l===""?b.push(Number(a)):b.push(Number(a)*Math.pow(10,Number(l)))),a="",l=""}let n;const T=r.length;for(let B=0;B<T;B++){if(n=r[B],Array.isArray(s)&&s.includes(b.length%e)&&t.FLAGS.test(n)){m=u,a=n,o();continue}if(m===c){if(t.WHITESPACE.test(n))continue;if(t.DIGIT.test(n)||t.SIGN.test(n)){m=u,a=n;continue}if(t.POINT.test(n)){m=i,a=n;continue}t.COMMA.test(n)&&(x&&k(n,B,b),x=!0)}if(m===u){if(t.DIGIT.test(n)){a+=n;continue}if(t.POINT.test(n)){a+=n,m=i;continue}if(t.EXP.test(n)){m=p;continue}t.SIGN.test(n)&&a.length===1&&t.SIGN.test(a[0])&&k(n,B,b)}if(m===i){if(t.DIGIT.test(n)){a+=n;continue}if(t.EXP.test(n)){m=p;continue}t.POINT.test(n)&&a[a.length-1]==="."&&k(n,B,b)}if(m===p){if(t.DIGIT.test(n)){l+=n;continue}if(t.SIGN.test(n)){if(l===""){l+=n;continue}l.length===1&&t.SIGN.test(l)&&k(n,B,b)}}t.WHITESPACE.test(n)?(o(),m=c,x=!1):t.COMMA.test(n)?(o(),m=c,x=!0):t.SIGN.test(n)?(o(),m=u,a=n):t.POINT.test(n)?(o(),m=i,a=n):k(n,B,b)}return o(),b}const I=["mm","cm","in","pt","pc","px"],O={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function h(r){let s="px";if(typeof r=="string"||r instanceof String)for(let t=0,c=I.length;t<c;t++){const u=I[t];if(r.endsWith(u)){s=u,r=r.substring(0,r.length-u.length);break}}let e;return s==="px"&&q.defaultUnit!=="px"?e=O.in[q.defaultUnit]/q.defaultDPI:(e=O[s][q.defaultUnit],e<0&&(e=O[s].in*q.defaultDPI)),e*parseFloat(r)}function M(r){if(!(r.hasAttribute("transform")||r.nodeName==="use"&&(r.hasAttribute("x")||r.hasAttribute("y"))))return null;const s=S(r);return H.length>0&&s.premultiply(H[H.length-1]),ot.copy(s),H.push(s),s}function S(r){const s=new lt,e=et;if(r.nodeName==="use"&&(r.hasAttribute("x")||r.hasAttribute("y"))){const t=h(r.getAttribute("x")),c=h(r.getAttribute("y"));s.translate(t,c)}if(r.hasAttribute("transform")){const t=r.getAttribute("transform").split(")");for(let c=t.length-1;c>=0;c--){const u=t[c].trim();if(u==="")continue;const i=u.indexOf("("),p=u.length;if(i>0&&i<p){const m=u.slice(0,i),x=y(u.slice(i+1));switch(e.identity(),m){case"translate":if(x.length>=1){const a=x[0];let l=0;x.length>=2&&(l=x[1]),e.translate(a,l)}break;case"rotate":if(x.length>=1){let a=0,l=0,b=0;a=x[0]*Math.PI/180,x.length>=3&&(l=x[1],b=x[2]),$.makeTranslation(-l,-b),E.makeRotation(a),f.multiplyMatrices(E,$),$.makeTranslation(l,b),e.multiplyMatrices($,f)}break;case"scale":if(x.length>=1){const a=x[0];let l=a;x.length>=2&&(l=x[1]),e.scale(a,l)}break;case"skewX":x.length===1&&e.set(1,Math.tan(x[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":x.length===1&&e.set(1,0,0,Math.tan(x[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":x.length===6&&e.set(x[0],x[2],x[4],x[1],x[3],x[5],0,0,1);break}}s.premultiply(e)}}return s}function N(r,s){function e(i){J.set(i.x,i.y,1).applyMatrix3(s),i.set(J.x,J.y)}function t(i){const p=i.xRadius,m=i.yRadius,x=Math.cos(i.aRotation),a=Math.sin(i.aRotation),l=new dt(p*x,p*a,0),b=new dt(-m*a,m*x,0),k=l.applyMatrix3(s),o=b.applyMatrix3(s),n=et.set(k.x,o.x,0,k.y,o.y,0,0,0,1),T=$.copy(n).invert(),rt=E.copy(T).transpose().multiply(T).elements,_=tt(rt[0],rt[1],rt[4]),it=Math.sqrt(_.rt1),ut=Math.sqrt(_.rt2);if(i.xRadius=1/it,i.yRadius=1/ut,i.aRotation=Math.atan2(_.sn,_.cs),!((i.aEndAngle-i.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const ht=$.set(it,0,0,0,ut,0,0,0,1),gt=E.set(_.cs,_.sn,0,-_.sn,_.cs,0,0,0,1),pt=ht.multiply(gt).multiply(n),At=Mt=>{const{x:It,y:St}=new dt(Math.cos(Mt),Math.sin(Mt),0).applyMatrix3(pt);return Math.atan2(St,It)};i.aStartAngle=At(i.aStartAngle),i.aEndAngle=At(i.aEndAngle),R(s)&&(i.aClockwise=!i.aClockwise)}}function c(i){const p=L(s),m=D(s);i.xRadius*=p,i.yRadius*=m;const x=p>Number.EPSILON?Math.atan2(s.elements[1],s.elements[0]):Math.atan2(-s.elements[3],s.elements[4]);i.aRotation+=x,R(s)&&(i.aStartAngle*=-1,i.aEndAngle*=-1,i.aClockwise=!i.aClockwise)}const u=r.subPaths;for(let i=0,p=u.length;i<p;i++){const x=u[i].curves;for(let a=0;a<x.length;a++){const l=x[a];l.isLineCurve?(e(l.v1),e(l.v2)):l.isCubicBezierCurve?(e(l.v0),e(l.v1),e(l.v2),e(l.v3)):l.isQuadraticBezierCurve?(e(l.v0),e(l.v1),e(l.v2)):l.isEllipseCurve&&(Z.set(l.aX,l.aY),e(Z),l.aX=Z.x,l.aY=Z.y,C(s)?t(l):c(l))}}}function R(r){const s=r.elements;return s[0]*s[4]-s[1]*s[3]<0}function C(r){const s=r.elements,e=s[0]*s[3]+s[1]*s[4];if(e===0)return!1;const t=L(r),c=D(r);return Math.abs(e/(t*c))>Number.EPSILON}function L(r){const s=r.elements;return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function D(r){const s=r.elements;return Math.sqrt(s[3]*s[3]+s[4]*s[4])}function tt(r,s,e){let t,c,u,i,p;const m=r+e,x=r-e,a=Math.sqrt(x*x+4*s*s);return m>0?(t=.5*(m+a),p=1/t,c=r*p*e-s*p*s):m<0?c=.5*(m-a):(t=.5*a,c=-.5*a),x>0?u=x+a:u=x-a,Math.abs(u)>2*Math.abs(s)?(p=-2*s/u,i=1/Math.sqrt(1+p*p),u=p*i):Math.abs(s)===0?(u=1,i=0):(p=-.5*u/s,u=1/Math.sqrt(1+p*p),i=p*u),x>0&&(p=u,u=-i,i=p),{rt1:t,rt2:c,cs:u,sn:i}}const w=[],Y={},H=[],et=new lt,$=new lt,E=new lt,f=new lt,Z=new W,J=new dt,ot=new lt,ct=new DOMParser().parseFromString(P,"image/svg+xml");return j(ct.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:w,xml:ct.documentElement}}static createShapes(P){const j={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},A={loc:j.ORIGIN,t:0};function d(g,y,I,O){const h=g.x,M=y.x,S=I.x,N=O.x,R=g.y,C=y.y,L=I.y,D=O.y,tt=(N-S)*(R-L)-(D-L)*(h-S),w=(M-h)*(R-L)-(C-R)*(h-S),Y=(D-L)*(M-h)-(N-S)*(C-R),H=tt/Y,et=w/Y;if(Y===0&&tt!==0||H<=0||H>=1||et<0||et>1)return null;if(tt===0&&Y===0){for(let $=0;$<2;$++)if(z($===0?I:O,g,y),A.loc==j.ORIGIN){const E=$===0?I:O;return{x:E.x,y:E.y,t:A.t}}else if(A.loc==j.BETWEEN){const E=+(h+A.t*(M-h)).toPrecision(10),f=+(R+A.t*(C-R)).toPrecision(10);return{x:E,y:f,t:A.t}}return null}else{for(let f=0;f<2;f++)if(z(f===0?I:O,g,y),A.loc==j.ORIGIN){const Z=f===0?I:O;return{x:Z.x,y:Z.y,t:A.t}}const $=+(h+H*(M-h)).toPrecision(10),E=+(R+H*(C-R)).toPrecision(10);return{x:$,y:E,t:H}}}function z(g,y,I){const O=I.x-y.x,h=I.y-y.y,M=g.x-y.x,S=g.y-y.y,N=O*S-M*h;if(g.x===y.x&&g.y===y.y){A.loc=j.ORIGIN,A.t=0;return}if(g.x===I.x&&g.y===I.y){A.loc=j.DESTINATION,A.t=1;return}if(N<-Number.EPSILON){A.loc=j.LEFT;return}if(N>Number.EPSILON){A.loc=j.RIGHT;return}if(O*M<0||h*S<0){A.loc=j.BEHIND;return}if(Math.sqrt(O*O+h*h)<Math.sqrt(M*M+S*S)){A.loc=j.BEYOND;return}let R;O!==0?R=M/O:R=S/h,A.loc=j.BETWEEN,A.t=R}function F(g,y){const I=[],O=[];for(let h=1;h<g.length;h++){const M=g[h-1],S=g[h];for(let N=1;N<y.length;N++){const R=y[N-1],C=y[N],L=d(M,S,R,C);L!==null&&I.find(D=>D.t<=L.t+Number.EPSILON&&D.t>=L.t-Number.EPSILON)===void 0&&(I.push(L),O.push(new W(L.x,L.y)))}}return O}function X(g,y,I){const O=new W;y.getCenter(O);const h=[];return I.forEach(M=>{M.boundingBox.containsPoint(O)&&F(g,M.points).forEach(N=>{h.push({identifier:M.identifier,isCW:M.isCW,point:N})})}),h.sort((M,S)=>M.point.x-S.point.x),h}function v(g,y,I,O,h){(h==null||h==="")&&(h="nonzero");const M=new W;g.boundingBox.getCenter(M);const S=[new W(I,M.y),new W(O,M.y)],N=X(S,g.boundingBox,y);N.sort((w,Y)=>w.point.x-Y.point.x);const R=[],C=[];N.forEach(w=>{w.identifier===g.identifier?R.push(w):C.push(w)});const L=R[0].point.x,D=[];let tt=0;for(;tt<C.length&&C[tt].point.x<L;)D.length>0&&D[D.length-1]===C[tt].identifier?D.pop():D.push(C[tt].identifier),tt++;if(D.push(g.identifier),h==="evenodd"){const w=D.length%2===0,Y=D[D.length-2];return{identifier:g.identifier,isHole:w,for:Y}}else if(h==="nonzero"){let w=!0,Y=null,H=null;for(let et=0;et<D.length;et++){const $=D[et];w?(H=y[$].isCW,w=!1,Y=$):H!==y[$].isCW&&(H=y[$].isCW,w=!0)}return{identifier:g.identifier,isHole:w,for:Y}}else console.warn('fill-rule: "'+h+'" is currently not implemented.')}let Q=999999999,G=-999999999,V=P.subPaths.map(g=>{const y=g.getPoints();let I=-999999999,O=999999999,h=-999999999,M=999999999;for(let S=0;S<y.length;S++){const N=y[S];N.y>I&&(I=N.y),N.y<O&&(O=N.y),N.x>h&&(h=N.x),N.x<M&&(M=N.x)}return G<=h&&(G=h+1),Q>=M&&(Q=M-1),{curves:g.curves,points:y,isCW:Ot.isClockWise(y),identifier:-1,boundingBox:new Rt(new W(M,O),new W(h,I))}});V=V.filter(g=>g.points.length>1);for(let g=0;g<V.length;g++)V[g].identifier=g;const st=V.map(g=>v(g,V,Q,G,P.userData?P.userData.style.fillRule:void 0)),U=[];return V.forEach(g=>{if(!st[g.identifier].isHole){const I=new Bt;I.curves=g.curves,st.filter(h=>h.isHole&&h.for===g.identifier).forEach(h=>{const M=V[h.identifier],S=new bt;S.curves=M.curves,I.holes.push(S)}),U.push(I)}}),U}static getStrokeStyle(P,q,j,A,d){return P=P!==void 0?P:1,q=q!==void 0?q:"#000",j=j!==void 0?j:"miter",A=A!==void 0?A:"butt",d=d!==void 0?d:4,{strokeColor:q,strokeWidth:P,strokeLineJoin:j,strokeLineCap:A,strokeMiterLimit:d}}static pointsToStroke(P,q,j,A){const d=[],z=[],F=[];if(mt.pointsToStrokeWithBuffers(P,q,j,A,d,z,F)===0)return null;const X=new Gt;return X.setAttribute("position",new kt(d,3)),X.setAttribute("normal",new kt(z,3)),X.setAttribute("uv",new kt(F,2)),X}static pointsToStrokeWithBuffers(P,q,j,A,d,z,F,X){const v=new W,Q=new W,G=new W,V=new W,st=new W,U=new W,g=new W,y=new W,I=new W,O=new W,h=new W,M=new W,S=new W,N=new W,R=new W,C=new W,L=new W;j=j!==void 0?j:12,A=A!==void 0?A:.001,X=X!==void 0?X:0,P=x(P);const D=P.length;if(D<2)return 0;const tt=P[0].equals(P[D-1]);let w,Y=P[0],H;const et=q.strokeWidth/2,$=1/(D-1);let E=0,f,Z,J,ot,ct=!1,xt=0,r=X*3,s=X*2;e(P[0],P[1],v).multiplyScalar(et),y.copy(P[0]).sub(v),I.copy(P[0]).add(v),O.copy(y),h.copy(I);for(let a=1;a<D;a++){w=P[a],a===D-1?tt?H=P[1]:H=void 0:H=P[a+1];const l=v;if(e(Y,w,l),G.copy(l).multiplyScalar(et),M.copy(w).sub(G),S.copy(w).add(G),f=E+$,Z=!1,H!==void 0){e(w,H,Q),G.copy(Q).multiplyScalar(et),N.copy(w).sub(G),R.copy(w).add(G),J=!0,G.subVectors(H,Y),l.dot(G)<0&&(J=!1),a===1&&(ct=J),G.subVectors(H,w),G.normalize();const b=Math.abs(l.dot(G));if(b>Number.EPSILON){const k=et/b;G.multiplyScalar(-k),V.subVectors(w,Y),st.copy(V).setLength(k).add(G),C.copy(st).negate();const o=st.length(),n=V.length();V.divideScalar(n),U.subVectors(H,w);const T=U.length();switch(U.divideScalar(T),V.dot(C)<n&&U.dot(C)<T&&(Z=!0),L.copy(st).add(w),C.add(w),ot=!1,Z?J?(R.copy(C),S.copy(C)):(N.copy(C),M.copy(C)):u(),q.strokeLineJoin){case"bevel":i(J,Z,f);break;case"round":p(J,Z),J?c(w,M,N,f,0):c(w,R,S,f,1);break;case"miter":case"miter-clip":default:const B=et*q.strokeMiterLimit/o;if(B<1)if(q.strokeLineJoin!=="miter-clip"){i(J,Z,f);break}else p(J,Z),J?(U.subVectors(L,M).multiplyScalar(B).add(M),g.subVectors(L,N).multiplyScalar(B).add(N),t(M,f,0),t(U,f,0),t(w,f,.5),t(w,f,.5),t(U,f,0),t(g,f,0),t(w,f,.5),t(g,f,0),t(N,f,0)):(U.subVectors(L,S).multiplyScalar(B).add(S),g.subVectors(L,R).multiplyScalar(B).add(R),t(S,f,1),t(U,f,1),t(w,f,.5),t(w,f,.5),t(U,f,1),t(g,f,1),t(w,f,.5),t(g,f,1),t(R,f,1));else Z?(J?(t(I,E,1),t(y,E,0),t(L,f,0),t(I,E,1),t(L,f,0),t(C,f,1)):(t(I,E,1),t(y,E,0),t(L,f,1),t(y,E,0),t(C,f,0),t(L,f,1)),J?N.copy(L):R.copy(L)):J?(t(M,f,0),t(L,f,0),t(w,f,.5),t(w,f,.5),t(L,f,0),t(N,f,0)):(t(S,f,1),t(L,f,1),t(w,f,.5),t(w,f,.5),t(L,f,1),t(R,f,1)),ot=!0;break}}else u()}else u();!tt&&a===D-1&&m(P[0],O,h,J,!0,E),E=f,Y=w,y.copy(N),I.copy(R)}if(!tt)m(w,M,S,J,!1,f);else if(Z&&d){let a=L,l=C;ct!==J&&(a=C,l=L),J?(ot||ct)&&(l.toArray(d,0*3),l.toArray(d,3*3),ot&&a.toArray(d,1*3)):(ot||!ct)&&(l.toArray(d,1*3),l.toArray(d,3*3),ot&&a.toArray(d,0*3))}return xt;function e(a,l,b){return b.subVectors(l,a),b.set(-b.y,b.x).normalize()}function t(a,l,b){d&&(d[r]=a.x,d[r+1]=a.y,d[r+2]=0,z&&(z[r]=0,z[r+1]=0,z[r+2]=1),r+=3,F&&(F[s]=l,F[s+1]=b,s+=2)),xt+=3}function c(a,l,b,k,o){v.copy(l).sub(a).normalize(),Q.copy(b).sub(a).normalize();let n=Math.PI;const T=v.dot(Q);Math.abs(T)<1&&(n=Math.abs(Math.acos(T))),n/=j,G.copy(l);for(let B=0,nt=j-1;B<nt;B++)V.copy(G).rotateAround(a,n),t(G,k,o),t(V,k,o),t(a,k,.5),G.copy(V);t(V,k,o),t(b,k,o),t(a,k,.5)}function u(){t(I,E,1),t(y,E,0),t(M,f,0),t(I,E,1),t(M,f,0),t(S,f,1)}function i(a,l,b){l?a?(t(I,E,1),t(y,E,0),t(M,f,0),t(I,E,1),t(M,f,0),t(C,f,1),t(M,b,0),t(N,b,0),t(C,b,.5)):(t(I,E,1),t(y,E,0),t(S,f,1),t(y,E,0),t(C,f,0),t(S,f,1),t(S,b,1),t(C,b,0),t(R,b,1)):a?(t(M,b,0),t(N,b,0),t(w,b,.5)):(t(S,b,1),t(R,b,0),t(w,b,.5))}function p(a,l){l&&(a?(t(I,E,1),t(y,E,0),t(M,f,0),t(I,E,1),t(M,f,0),t(C,f,1),t(M,E,0),t(w,f,.5),t(C,f,1),t(w,f,.5),t(N,E,0),t(C,f,1)):(t(I,E,1),t(y,E,0),t(S,f,1),t(y,E,0),t(C,f,0),t(S,f,1),t(S,E,1),t(C,f,0),t(w,f,.5),t(w,f,.5),t(C,f,0),t(R,E,1)))}function m(a,l,b,k,o,n){switch(q.strokeLineCap){case"round":o?c(a,b,l,n,.5):c(a,l,b,n,.5);break;case"square":if(o)v.subVectors(l,a),Q.set(v.y,-v.x),G.addVectors(v,Q).add(a),V.subVectors(Q,v).add(a),k?(G.toArray(d,1*3),V.toArray(d,0*3),V.toArray(d,3*3)):(G.toArray(d,1*3),F[3*2+1]===1?V.toArray(d,3*3):G.toArray(d,3*3),V.toArray(d,0*3));else{v.subVectors(b,a),Q.set(v.y,-v.x),G.addVectors(v,Q).add(a),V.subVectors(Q,v).add(a);const T=d.length;k?(G.toArray(d,T-1*3),V.toArray(d,T-2*3),V.toArray(d,T-4*3)):(V.toArray(d,T-2*3),G.toArray(d,T-1*3),V.toArray(d,T-4*3))}break}}function x(a){let l=!1;for(let k=1,o=a.length-1;k<o;k++)if(a[k].distanceTo(a[k+1])<A){l=!0;break}if(!l)return a;const b=[];b.push(a[0]);for(let k=1,o=a.length-1;k<o;k++)a[k].distanceTo(a[k+1])>=A&&b.push(a[k]);return b.push(a[a.length-1]),b}}}function Ut(){const[ft,P]=yt.useState(null),[q,j]=yt.useState(null),A=d3.geoAlbers().scale(1300).translate([487.5,305]);return yt.useEffect(()=>{(async()=>{const F=(await d3.csv("./data/airports.csv")).map(X=>({type:"Feature",properties:X,geometry:{type:"Point",coordinates:[+X.longitude,+X.latitude]}}));j(F)})()},[]),yt.useEffect(()=>{if(!q)return;const F=`<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    ${d3.geoVoronoi().polygons(q).features.map(d3.geoPath(A)).map(Q=>`<path d="${Q}" stroke="red" stroke-width="1"/>`).join(`
`)}
    </svg>
    `;console.log(F);const v=new mt().parse(F);P(v)},[q]),K.jsx("group",{children:ft&&ft.paths.map((d,z)=>{const F=d.userData.style||{};F.fill||d.color;const X=F.stroke||"#000000",v=F.strokeWidth!==void 0?parseFloat(F.strokeWidth):1,Q=d.subPaths.flatMap((G,V)=>{const st=G.getPoints(),U={strokeWidth:v,strokeColor:new Wt().setStyle(X),strokeLineJoin:F.strokeLinejoin||"miter",strokeLineCap:F.strokeLinecap||"butt",strokeMiterLimit:F.strokeMiterLimit||4},g=mt.pointsToStroke(st,U);if(g){const y=new qt({color:X,side:Ft});return K.jsx("mesh",{geometry:g,material:y},`stroke-${z}-${V}`)}else return[]});return[,...Q]})})}function Xt(){const{camera:ft}=Pt(),P=()=>{console.log(ft.position)};return K.jsxs(K.Fragment,{children:[K.jsx(Nt,{onChange:P}),K.jsx(Dt,{children:K.jsx(Ht,{intensity:2,mipmapBlur:!1,luminanceThreshold:0,luminanceSmoothing:.025})}),K.jsx("ambientLight",{intensity:3}),K.jsxs("mesh",{children:[K.jsx("boxGeometry",{args:[1,1,1]}),K.jsx("meshBasicMaterial",{color:16711680})]}),K.jsx("group",{position:[400,300,-300],rotation:[0,wt.degToRad(0),wt.degToRad(180)],children:K.jsx(Ut,{})})]})}function vt(){return K.jsx(K.Fragment,{children:K.jsx(Et,{camera:{fov:75,far:5e3,near:1,position:[0,0,-800]},children:K.jsx(Xt,{})})})}Ct(document.getElementById("root")).render(K.jsx(vt,{}));
